<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2021-09-18 Sat 00:56 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Project Isidore Design Notebook</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Site Admin.">

  <link rel="stylesheet" type="text/css" href="../global.css"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500&family=EB+Garamond:ital@0;1&family=Montserrat:ital@0;1&display=swap" rel="stylesheet">
  <link rel="stylesheet"
        href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/base16/solarized-light.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"></script>
  <script>var hlf=function(){Array.prototype.forEach.call(document.querySelectorAll("pre.src"),function(t){var e;e=t.getAttribute("class"),e=e.replace(/src-(w+)/,"src-$1 $1"),console.log(e),t.setAttribute("class",e),hljs.highlightBlock(t)})};addEventListener("DOMContentLoaded",hlf);</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="preamble" class="status">

                                    <div class="header header-fixed">
                                      <div class="navbar container">
                                        <div class="logo"><a href="/">Hanshen Wang</a></div>
                                        <input type="checkbox" id="navbar-toggle" >
                                        <label for="navbar-toggle"><i></i></label>
                                        <nav class="menu">
                                          <ul>
                                            <li><a href="/about">About</a></li>
                                            <li><a href="/work">Work</a></li>
                                            <li><a href="/blog/archive.html">Blog</a></li>
                                            <li><a href="/contact">Contact</a></li>
                                          </ul>
                                        </nav>
                                      </div>
                                    </div>
                                    <h1 class="title">Project Isidore Design Notebook</h1>
                                    <p class="subtitle">Personal web application meta documentation with Org Babel</p> <br/>
                                    <p class="updated"><a href="/contact#article-history">Updated:</a> 2021-09-18 Sat 00:55</p>
</div>
<div id="content">
<div class="abstract">
<p>

</p>

<p>
Project Isidore serves as a personal web application, currently set up
to blog effortlessly with org-mode. This blog post simultaneously serves as
project documentation and enables literate programming via org-babel.
</p>

</div>
<p>
<hr/>
</p>
<nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#Introduction">1. Introduction</a></li>
<li><a href="#org823fb92">2. Common Lisp Environment Setup</a></li>
<li><a href="#Project-Isidore-System-Definition">3. Project Isidore System Definition</a>
<ul>
<li><a href="#orgf30db02">3.1. System dependencies</a></li>
</ul>
</li>
<li><a href="#org00efde1">4. Org Publish Pipeline</a></li>
<li><a href="#Application">5. Application</a>
<ul>
<li><a href="#Index-lisp">5.1. Index.lisp</a></li>
</ul>
</li>
<li><a href="#Builds-Deployment">6. Builds and Deployment</a>
<ul>
<li><a href="#Heroku-Buildpack-Exposition">6.1. Heroku Buildpack Exposition</a>
<ul>
<li><a href="#orgcf13bdb">6.1.1. Detect Script</a>
<ul>
<li><a href="#org17aa21b">Heroku Compile</a></li>
</ul>
</li>
<li><a href="#orgccb8647">6.1.2. Compile Script</a>
<ul>
<li><a href="#org2901d15">Compile Lisp</a>
<ul>
<li><a href="#Heroku">Heroku</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org03956d2">6.1.3. Release Script</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org92ac5d0">7. Testing</a>
<ul>
<li><a href="#orgf9103fa">7.1. CI with Github Actions</a></li>
<li><a href="#org6d76874">7.2. Debugging</a></li>
</ul>
</li>
<li><a href="#Project-History-Credits">8. Project History &amp; Credits</a></li>
</ul>
</div>
</nav>
<div id="outline-container-org033c35f" class="outline-2">
<h2 id="Introduction"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-Introduction">
<p>
Welcome! Make sure that your Common Lisp development environment is <a href="#org823fb92">properly set
up.</a> If that's no issue jump to the <a href="#org00efde1">Org Publish Pipeline Section</a>, <a href="#Builds-Deployment">Heroku
Deployment Section</a> or a <a href="#Project-Isidore-System-Definition">high level project overview</a>. Due to article length
navigation buttons are inserted next to each header to take one back to the
table of contents.
</p>

<ol class="org-ol">
<li><p>
Start Development Server
</p>

<p>
Quickstart:
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>ql:quickload <span class="org-builtin">:project-isidore</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>project-isidore:start-dev-server<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment">; starts server at localhost:4242</span>
</pre>
</div>

<p>
Full Steps:
</p>
<ol class="org-ol">
<li><a href="(org-babel-tangle)">Tangle this file</a> or, <code>, b t</code> or <code>org-babel-tangle</code> to ensure updated code</li>
<li>Ensure all .lisp files have a corresponding source block in this file</li>
<li><a href="(sly)">Start SLY</a> or <code>M-x RET Sly</code></li>
<li><code>, cd</code> inside the <code>*sly-repl sbcl*</code> buffer to project isidore root</li>
<li><p>
Load project isidore system file in buffer <code>*sly-repl sbcl*</code>. Optionally use <code>ql:quickload "project-isidore"</code> if you need to download dependencies.
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">If the dependencies in project-isidore.asd are downloaded locally</span>
<span class="org-rainbow-delimiters-depth-1">(</span>asdf:load-system <span class="org-builtin">:project-isidore</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">If you wish to download the dependencies from online</span>
<span class="org-rainbow-delimiters-depth-1">(</span>ql:quickload <span class="org-builtin">:project-isidore</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div></li>
<li><p>
Switch to project-isidore package namespace
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">in-package</span> <span class="org-builtin">:project-isidore</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div></li>
<li><p>
Launch Development Server with
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>start-dev-server<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div></li>
<li><p>
Stop Development Server with
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-comment-delimiter">; </span><span class="org-comment">if in CL-USER package, :: to access unexported variables</span>
<span class="org-rainbow-delimiters-depth-1">(</span>project-isidore::stop-dev-server<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div></li>
</ol></li>
<li>Lisp Web Example Projects &amp; Misc. Resources
<ul class="org-ul">
<li><a href="https://gitlab.com/duncan-bayne/heroku-app-clozure-common-lisp">Duncan Bayne / heroku-app-clozure-common-lisp 路 GitLab</a>.</li>
<li><a href="https://gitlab.com/bendersteed/bread-and-roses">bendersteed / bread and roses 路 GitLab</a></li>
<li><a href="https://github.com/vindarel/lisp-web-template-productlist">GitHub - vindarel/lisp-web-template-productlist: A web template with Hunchent&#x2026;</a></li>
<li><a href="https://github.com/40ants/lisp-project-of-the-day">GitHub - 40ants/lisp-project-of-the-day: Here I'll post notes about Quicklisp&#x2026;</a></li>
<li><a href="https://github.com/rajasegar/cl-bootstrap/tree/master/demo">cl-bootstrap/demo at master 路 rajasegar/cl-bootstrap 路 GitHub</a></li>
<li><a href="https://github.com/mtravers/wuwei/#examples">GitHub - mtravers/wuwei: WuWei &#x2013; effortless Ajax web UIs from Common Lisp</a></li>
<li><a href="https://common-lisp.net/">https://common-lisp.net/</a></li>
<li><a href="https://google.github.io/styleguide/lispguide.xml">https://google.github.io/styleguide/lispguide.xml</a></li>
<li><a href="https://github.com/cjbarber/ToolsOfTheTrade">Tools of the Trade, from Hacker News. List of SaaS services</a></li>
<li><a href="https://github.com/255kb/stack-on-a-budget">GitHub - 255kb/stack-on-a-budget: A collection of services with great free ti&#x2026;</a></li>
<li><a href="https://kuomarc.wordpress.com/2012/05/13/12-steps-to-build-and-deploy-common-lisp-in-the-cloud-and-comparing-rails/">12 Steps to Build and Deploy Common Lisp in the Cloud (and Comparing Rails) |&#x2026;</a></li>
</ul></li>
</ol>
</div>
</div>

<div id="outline-container-org823fb92" class="outline-2">
<h2 id="org823fb92"><span class="section-number-2">2</span> Common Lisp Environment Setup</h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li><a href="031a3b02-b36c-4875-b714-6ff8e9a3978c">&lt;&#x2013;Practical Common Lisp</a></li>
<li><a href="6588253f-4a2e-4a8c-ac23-bcb073e47213">&lt;&#x2013;Linux Program Directory</a></li>
</ul>

<blockquote>
<p>
He is like to a man building a house, who digged deep and laid the foundation
upon a rock. And when a flood came, the stream beat vehemently upon that house:
and it could not shake it: for it was founded on a rock. But he that heareth and
doth not is like to a man building his house upon the earth without a
foundation: against which the stream beat vehemently. And immediately it fell:
and the ruin of that house was great.
</p>

<p>
&#x2013;Luke 6:48-49
</p>
</blockquote>

<p>
<b>Why lisp?</b> There are always more poets than non-poets in the world, or so
I've heard.
</p>

<p>
Practically speaking, a complete and recent tour of the LISP world for beginners
has already been written: <a href="https://stevelosh.com/blog/2018/08/a-road-to-common-lisp/">Steve Losh - Intro to Common lisp</a>. Steve Losh aptly
characterizes the infant field of web development &#x2013; at least in Anno Domini
2021 &#x2013; not as a hamster wheel of backwards incompatibility, but a hamster
centrifuge. A house of sand, indeed. In technical aspects, <a href="http://www.paulgraham.com/icad.html">Paul Graham's
writings</a> convey any advantages better than I can.
</p>

<p>
Below are the steps I have taken to setup a Common Lisp environment inside Spacemacs.
</p>

<ol class="org-ol">
<li><p>
Install Steel Bank Common Lisp, a Common Lisp implementation.
</p>

<p>
Installing SBCL from your Linux distribution's package manager is the most
straight forward way. On Debian/Ubuntu this is as simple as
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt install sbcl
</pre>
</div>

<p>
Downloading and unpacking a binary from <a href="http://www.sbcl.org">http://www.sbcl.org</a> or building from source
are viable options for later should you need the latest and greatest. In
spacemacs install the <code>common-lisp</code> layer as the README indicates and
start the REPL with <code>M-x RET slime</code>. You can exit the REPL with <code>(quit)</code>.
</p></li>

<li><p>
Install Quicklisp - the Common Lisp Package Manager
</p>

<p>
Download quicklisp.lisp from <a href="https://www.quicklisp.org/beta/#installation">Quicklisp</a> and then in your shell,
</p>

<div class="org-src-container">
<pre class="src src-bash"><span class="org-builtin">cd</span> ~/path-to-downloaded-quicklisp.lisp
sbcl --load quicklisp.lisp
<span class="org-rainbow-delimiters-depth-1">(</span>quicklisp-quickstart:install<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>ql:add-to-init-file<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>quit<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Quicklisp also installs ASDF, the defacto project system in Common Lisp.
After quickloading a project, it will be stored locally. It will be in a
directory similar to:
</p>

<div class="org-src-container">
<pre class="src src-bash">/home/hanshen/quicklisp/dists/quicklisp/software/example-project-2020-01-01-git
</pre>
</div>

<p>
Also, <code>(ql:where-is-system 'system-name)</code> will return the system's location.
</p>

<p>
In order to <code>(ql:quickload :your-local-project)</code> quicklisp looks in
<code>/$HOME/quicklisp/local-projects/</code> for said project. You can symlink
your project if you desire to use some other folder.
</p></li>

<li><p>
<b>Optional:</b> Enable org-babel literate programming with Lisp
</p>

<p>
You likely heard of <code>org-babel</code>, an extension of org-mode that allows one to
interleave text and code. It is comparable to a more powerful jupyter
notebook. Get lisp in org-babel blocks by, adding to your init.el/user-config.el
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>org-babel-do-load-languages
 'org-babel-load-languages
 '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>lisp . t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
When evaluating a code block with <code>C-c C-c</code> (<code>, ,</code> in spacemacs), make sure
to start SLIME first (M-x slime RET).
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>format nil <span class="org-string">"Hello World!"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Some may be familiar with <code>poly-org</code>, a MELPA package which allow multiple
major modes. Naturally this comes in handy when using literate programming.
It uses <code>font-lock-mode</code> to turn on the relevant major mode when your cursor
is inside said code block. This saves you from having to call
<code>org-edit-special</code> repeatedly.
</p>

<p>
Furthermore, for most languages you can only evaluate the
entire code block. Not so for lisp. <code>M-x slime-compile-defun</code> and <code>M-x
   slime-compile-region</code> do as they say on the tin: compile the specific
function or highlighted region at cursor. <code>Poly-org</code> breaks these functions
slightly as they do not treat <code>#+begin_src</code> and <code>#+end_src</code> as the start and
end-of-file respectively. The following emacs lisp snippet fixes that.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">with-eval-after-load</span> <span class="org-string">"poly-org"</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">sly-compile-file sends entire .org file. Narrow to span as done in poly-R</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">https://github.com/polymode/poly-org/issues/25</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span>fboundp 'advice-add<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>advice-add 'slime-compile-file <span class="org-builtin">:around</span> 'pm-execute-narrowed-to-span<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>advice-add 'slime-compile-defun <span class="org-builtin">:around</span> 'pm-execute-narrowed-to-span<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>advice-add 'slime-load-file <span class="org-builtin">:around</span> 'pm-execute-narrowed-to-span<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>advice-add 'slime-eval-defun <span class="org-builtin">:around</span> 'pm-execute-narrowed-to-span<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>advice-add 'slime-eval-last-expression <span class="org-builtin">:around</span> 'pm-execute-narrowed-to-span<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>advice-add 'slime-eval-buffer <span class="org-builtin">:around</span> 'pm-execute-narrowed-to-span<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Since we've already shaved the editor yak up to this point, the last package
I'd like to mention that makes literate programming possible is
<a href="https://gitlab.com/mtekman/org-tanglesync.el">org-tanglesync</a>. To "tangle" a file is, in literate programming parlance, to
extract just the source code from a document. Then to de-tangle (two-way
sync) has always been a problem, and traditionally <code>org-babel-detangle</code> has
relied upon unsightly link comments to do so.
</p>

<p>
<code>Org-tanglesync</code> keeps your .git controlled source code and your .org mode
file in sync. And it does that without any markings or artifacts on the tangled
code, making collaboration easier. If a more elegant solution to
de-tangle a file exists out in the wild, please do let me know.
</p></li>
</ol>

<p>
The above steps assume you are already familiar with Spacemacs. For those who
are understandably wary of Emacs other IDE options exist: <a href="https://www.vim.org/scripts/script.php?script_id=2531">slimv</a> and
<a href="https://github.com/vlime/vlime">vlime</a> for vim, <a href="https://atom.io/packages/atom-slime">atom-slime</a> and <a href="https://github.com/neil-lindquist/slima">slima</a> for Atom. And for the editor-du-jour,
<a href="https://github.com/cxxxr/cl-lsp">a Common Lisp language server</a> is in the works. You'll also find many resources on the
lisp subreddit sidebar and with a little google-fu.
</p>

<p>
To sum it all up:
</p>
<ul class="org-ul">
<li>CL the Language = <a href="http://www.lispworks.com/documentation/common-lisp.html">ANSI Standard</a></li>
<li>CL Implementation = Steel Bank Common Lisp</li>
<li>CL Package Manager = Quicklisp</li>
<li>CL Project Manager/Build Facility = <a href="https://www.common-lisp.net/project/asdf/asdf.html">ASDF</a></li>
<li>CL IDE = <a href="https://common-lisp.net/project/slime/doc/html/">SLIME</a>/<a href="https://joaotavora.github.io/sly/">SLY</a></li>
</ul>

<p>
Newcomers to the language are advised to dive right into the <a href="http://www.cs.cmu.edu/afs/cs.cmu.edu/user/dst/www/LispBook/index.html">recommended
reading.</a> Now's a good chance to use org-babel for some note-taking. If you've
forked the repo to play around with, <a href="#Project-Isidore-System-Definition">a high-level overview of the project</a> may be
useful.
</p>
</div>
</div>
<div id="outline-container-org62e4a95" class="outline-2">
<h2 id="Project-Isidore-System-Definition"><span class="section-number-2">3</span> Project Isidore System Definition</h2>
<div class="outline-text-2" id="text-Project-Isidore-System-Definition">
<p>
Running <code>org-babel-tangle</code> on this document only produces source code. In the
directory tree below, such items are linked. All HTML blog entry files under /assets/blog
are generated by the <a href="#org00efde1">org-publish function.</a>
</p>

<ol class="org-ol">
<li><p>
Project Isidore
</p>
<ul class="org-ul">
<li>/.github
<ul class="org-ul">
<li>/workflows
<ul class="org-ul">
<li><a href="#orgf9103fa">CI.yml</a></li>
</ul></li>
</ul></li>
<li><a href="#Application">application.lisp</a></li>
<li>/assets
<ul class="org-ul">
<li>Website icon and background image files.</li>
<li>/blog
<ul class="org-ul">
<li>org-publish output directory.</li>
</ul></li>
</ul></li>
<li>/bin
<ul class="org-ul">
<li><a href="#orgccb8647">compile</a></li>
<li><a href="#orgcf13bdb">detect</a></li>
<li><a href="#org03956d2">release</a></li>
<li><a href="#org2901d15">compile.lisp</a></li>
</ul></li>
<li><a href="#Heroku">heroku.lisp</a></li>
<li><a href="#org17aa21b">heroku-compile.lisp</a></li>
<li><a href="#Index-lisp">index.lisp</a></li>
<li><a href="#Project-Isidore-System-Definition">project-isidore.asd</a></li>
<li>/test
<ul class="org-ul">
<li><a href="#org92ac5d0">project-isidore-tests.lisp</a></li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-lisp" id="orga17704e"><span class="org-rainbow-delimiters-depth-1">(</span>asdf:defsystem <span class="org-comment-delimiter">#:</span><span class="org-doc">project-isidore</span>
  <span class="org-builtin">:name</span> <span class="org-string">"Project Isidore"</span>
  <span class="org-builtin">:author</span> <span class="org-string">"Hanshen Wang <a href="mailto:hanshen%40hanshenwang.com">&lt;hanshen@hanshenwang.com&gt;</a>"</span>
  <span class="org-builtin">:description</span> <span class="org-string">"Personal Web Application"</span>
  <span class="org-builtin">:license</span>  <span class="org-string">"GNU Lesser Public License 3.0"</span>
  <span class="org-builtin">:version</span> <span class="org-string">"0.0.1"</span>
  <span class="org-builtin">:serial</span> t
  <span class="org-builtin">:depends-on</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-comment-delimiter">#:</span><span class="org-doc">hunchentoot</span>
               <span class="org-comment-delimiter">#:</span><span class="org-doc">cl-who</span>
               <span class="org-comment-delimiter">#:</span><span class="org-doc">cl-css</span>
               <span class="org-comment-delimiter">#:</span><span class="org-doc">parenscript</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:components</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:file</span> <span class="org-string">"application"</span><span class="org-rainbow-delimiters-depth-3">)</span>
               <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:file</span> <span class="org-string">"heroku"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:in-order-to</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>asdf:test-op <span class="org-rainbow-delimiters-depth-4">(</span>asdf:test-op <span class="org-builtin">:project-isidore/test</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
&#12;
<span class="org-rainbow-delimiters-depth-1">(</span>asdf:defsystem <span class="org-comment-delimiter">#:</span><span class="org-doc">project-isidore/test</span>
  <span class="org-builtin">:name</span> <span class="org-string">"Project Isidore Tests"</span>
  <span class="org-builtin">:author</span> <span class="org-string">"Hanshen Wang <a href="mailto:hanshen%40hanshenwang.com">&lt;hanshen@hanshenwang.com&gt;</a>"</span>
  <span class="org-builtin">:description</span> <span class="org-string">"Personal Web Application Test Suite"</span>
  <span class="org-builtin">:license</span> <span class="org-string">"GNU Lesser Public License 3.0"</span>
  <span class="org-builtin">:version</span> <span class="org-string">"0.0.1"</span>
  <span class="org-builtin">:serial</span> t
  <span class="org-builtin">:depends-on</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-comment-delimiter">#:</span><span class="org-doc">project-isidore</span>
               <span class="org-comment-delimiter">#:</span><span class="org-doc">parachute</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:components</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:module</span> <span class="org-string">"test"</span>
               <span class="org-builtin">:components</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:file</span> <span class="org-string">"project-isidore-tests"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:perform</span> <span class="org-rainbow-delimiters-depth-2">(</span>asdf:test-op <span class="org-rainbow-delimiters-depth-3">(</span>op c<span class="org-rainbow-delimiters-depth-3">)</span>
                    <span class="org-rainbow-delimiters-depth-3">(</span>uiop:symbol-call <span class="org-builtin">:parachute</span> <span class="org-builtin">:test</span> <span class="org-builtin">:project-isidore/test</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

</pre>
</div></li>
</ol>
</div>

<div id="outline-container-orgf30db02" class="outline-3">
<h3 id="orgf30db02"><span class="section-number-3">3.1</span> System dependencies</h3>
<div class="outline-text-3" id="text-3-1">
<ol class="org-ol">
<li><p>
Libraries &amp; Ecosystem
</p>

<p>
Looking for a library? In addition to online search queries, use command(s)
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>ql:system-apropos <span class="org-builtin">:library</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment">; search for term in quicklisp dist</span>
<span class="org-rainbow-delimiters-depth-1">(</span>ql:quickload <span class="org-builtin">:quicklisp-stats</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment">; look at quicklisp download stats</span>
<span class="org-rainbow-delimiters-depth-1">(</span>ql:who-depends-on <span class="org-builtin">:library</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment">; usage in lisp ecosystem</span>
<span class="org-rainbow-delimiters-depth-1">(</span>ql-dist:dependency-tree <span class="org-builtin">:library</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment">; number of dependencies upstream</span>
</pre>
</div></li>

<li>Common Lisp Dependencies</li>
</ol>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Library</th>
<th scope="col" class="org-left">Author</th>
<th scope="col" class="org-left">Function</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Hunchentoot</td>
<td class="org-left">Edi Weitz</td>
<td class="org-left">Web Server</td>
</tr>

<tr>
<td class="org-left">CL-WHO</td>
<td class="org-left">Edi Weitz</td>
<td class="org-left">HTML Generation</td>
</tr>

<tr>
<td class="org-left">CL-CSS</td>
<td class="org-left">Leo Zovic</td>
<td class="org-left">CSS Generation</td>
</tr>

<tr>
<td class="org-left">Parenscript</td>
<td class="org-left">Manuel Odendahl</td>
<td class="org-left">Lisp to Javascript Transpiler</td>
</tr>

<tr>
<td class="org-left">Parachute</td>
<td class="org-left">Nicolas Hafner</td>
<td class="org-left">Testing Framework</td>
</tr>
</tbody>
</table>

<ol class="org-ol">
<li>Javascript Dependencies
<ul class="org-ul">
<li>Highlight.js 11.2.0
Upgrade via editing <code>:head</code> under <code>org-publish-project-alist</code>.</li>
<li>Mathjax 2.7.0
See <code>C-h v org-html-mathjax-options</code> and <code>org-html-mathjax-template</code>.</li>
</ul></li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org00efde1" class="outline-2">
<h2 id="org00efde1"><span class="section-number-2">4</span> Org Publish Pipeline</h2>
<div class="outline-text-2" id="text-4">
<p>
In Spacemacs you will need to enable the <code>org</code> layer. Org Mode comes with Org
Publish built in. <a href="https://orgmode.org/manual/Publishing.html">Org Publish</a> takes advantage of Org's excellent export
capabilities to generate not only the HTML but also the sitemap and RSS. In the
/assets folder, archive.html lists all published articles.
</p>

<p>
To publish/update an article:
</p>
<ol class="org-ol">
<li>Prepare draft/existing notes for publishing, move .org file to input folder,
remove extraneous links, update citations, check formatting etc.</li>
<li><code>M-x RET org-publish RET blog</code></li>
<li>Commit changes in git</li>
<li><a href="#Builds-Deployment">Deploy</a></li>
</ol>

<p>
My Org Publish config is part of my literate .spacemacs org file. I plan to
publish the entire dotfile one day, similar to <a href="http://doc.norang.ca/org-mode.html">Org Mode - Organize Your Life In
Plain Text!</a> Until then, here is all the relevant configuration extracted.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp" id="orgf39aa28"><span class="org-comment-delimiter">;;</span><span class="org-comment">-------------------------------------------------------------------------</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">*** Org Ox Publish Config</span>
<span class="org-comment-delimiter">;;</span><span class="org-comment">-------------------------------------------------------------------------</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> '<span class="org-constant">ox-rss</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Following 2 lines are needed to exclude parent heading from table of contents but still export the content</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">https://emacs.stackexchange.com/questions/30183/orgmode-export-skip-ignore-first-headline-level</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> '<span class="org-constant">ox-extra</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>ox-extras-activate '<span class="org-rainbow-delimiters-depth-2">(</span>ignore-headlines<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Allows exporting bibtex citations to html</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> '<span class="org-constant">ox-bibtex</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Exclude default CSS from html export and add external stylesheet</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> org-html-head-include-default-style nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Omit inline css as we use an imported stylesheet</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> org-html-htmlize-output-type 'css<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">https://www.taingram.org/blog/org-mode-blog.html</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> org-export-global-macros
      '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"timestamp"</span> . <span class="org-string">"@@html:&lt;span class=\"timestamp\"&gt;[$1]&lt;/span&gt;@@"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-sitemap-date-entry-format</span> <span class="org-rainbow-delimiters-depth-2">(</span>entry style project<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Format ENTRY in org-publish PROJECT Sitemap format ENTRY ENTRY STYLE format that includes date."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>filename <span class="org-rainbow-delimiters-depth-5">(</span>org-publish-find-title entry project<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>= <span class="org-rainbow-delimiters-depth-5">(</span>length filename<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>format <span class="org-string">"*%s*"</span> entry<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>format <span class="org-string">"{{{timestamp(%s)}}} [[file:%s][%s]]"</span>
              <span class="org-rainbow-delimiters-depth-5">(</span>format-time-string <span class="org-string">"%Y-%m-%d"</span>
                                  <span class="org-rainbow-delimiters-depth-6">(</span>org-publish-find-date entry project<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
              entry
              filename<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> org-publish-project-alist
      '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"blog"</span>
         <span class="org-builtin">:components</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"blog-content"</span> <span class="org-string">"blog-rss"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"blog-content"</span>
         <span class="org-builtin">:base-directory</span> <span class="org-string">"~/Dropbox/project-maria/blog"</span>
         <span class="org-builtin">:html-extension</span> <span class="org-string">"html"</span>
         <span class="org-builtin">:base-extension</span> <span class="org-string">"org"</span>
         <span class="org-builtin">:recursive</span> t
         <span class="org-builtin">:publishing-function</span> org-html-publish-to-html
         <span class="org-builtin">:publishing-directory</span> <span class="org-string">"~/project-isidore/assets/blog"</span>
         <span class="org-builtin">:section-numbers</span> t
         <span class="org-builtin">:table-of-contents</span> t
         <span class="org-builtin">:exclude</span> <span class="org-string">"rss.org"</span>
         <span class="org-builtin">:with-title</span> nil
         <span class="org-builtin">:auto-sitemap</span> t
         <span class="org-builtin">:sitemap-filename</span> <span class="org-string">"archive.org"</span>
         <span class="org-builtin">:sitemap-title</span> <span class="org-string">"Blog Archive"</span>
         <span class="org-builtin">:sitemap-sort-files</span> anti-chronologically
         <span class="org-builtin">:sitemap-style</span> tree
         <span class="org-builtin">:sitemap-format-entry</span> my/org-sitemap-date-entry-format
         <span class="org-comment-delimiter">;; </span><span class="org-comment">Use HTML5</span>
         <span class="org-comment-delimiter">;; </span><span class="org-comment">https://orgmode.org/manual/HTML-doctypes.html#HTML-doctypes</span>
         <span class="org-builtin">:html-doctype</span> <span class="org-string">"html5"</span>
         <span class="org-builtin">:html-html5-fancy</span> t
         <span class="org-comment-delimiter">;; </span><span class="org-comment">Link to external custom stylesheet</span>
         <span class="org-comment-delimiter">;; </span><span class="org-comment">If you need code highlight from highlight.js, include the latter three lines.</span>
         <span class="org-builtin">:html-head</span> <span class="org-string">"</span>
<span class="org-string">  &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"../global.css\"/&gt;</span>
<span class="org-string">  &lt;link rel=\"preconnect\" href=\"https://fonts.googleapis.com\"&gt;</span>
<span class="org-string">  &lt;link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin&gt;</span>
<span class="org-string">  &lt;link href=\"https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500&amp;family=EB+Garamond:ital@0;1&amp;family=Montserrat:ital@0;1&amp;display=swap\" rel=\"stylesheet\"&gt;</span>
<span class="org-string">  &lt;link rel=\"stylesheet\"</span>
<span class="org-string">        href=\"//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/base16/solarized-light.min.css\"&gt;</span>
<span class="org-string">  &lt;script src=\"//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js\"&gt;&lt;/script&gt;</span>
<span class="org-string">  &lt;script&gt;var hlf=function(){Array.prototype.forEach.call(document.querySelectorAll(\"pre.src\"),function(t){var e;e=t.getAttribute(\"class\"),e=e.replace(/src-(</span><span class="org-string"><span class="org-warning">\</span></span><span class="org-string">w+)/,\"src-$1 $1\"),console.log(e),t.setAttribute(\"class\",e),hljs.highlightBlock(t)})};addEventListener(\"DOMContentLoaded\",hlf);&lt;/script&gt;"</span>
         <span class="org-builtin">:html-preamble</span> <span class="org-string">"</span>
<span class="org-string">                                    &lt;div class=\"header header-fixed\"&gt;</span>
<span class="org-string">                                      &lt;div class=\"navbar container\"&gt;</span>
<span class="org-string">                                        &lt;div class=\"logo\"&gt;&lt;a href=\"/\"&gt;Hanshen Wang&lt;/a&gt;&lt;/div&gt;</span>
<span class="org-string">                                        &lt;input type=\"checkbox\" id=\"navbar-toggle\" &gt;</span>
<span class="org-string">                                        &lt;label for=\"navbar-toggle\"&gt;&lt;i&gt;&lt;/i&gt;&lt;/label&gt;</span>
<span class="org-string">                                        &lt;nav class=\"menu\"&gt;</span>
<span class="org-string">                                          &lt;ul&gt;</span>
<span class="org-string">                                            &lt;li&gt;&lt;a href=\"/about\"&gt;About&lt;/a&gt;&lt;/li&gt;</span>
<span class="org-string">                                            &lt;li&gt;&lt;a href=\"/work\"&gt;Work&lt;/a&gt;&lt;/li&gt;</span>
<span class="org-string">                                            &lt;li&gt;&lt;a href=\"/blog/archive.html\"&gt;Blog&lt;/a&gt;&lt;/li&gt;</span>
<span class="org-string">                                            &lt;li&gt;&lt;a href=\"/contact\"&gt;Contact&lt;/a&gt;&lt;/li&gt;</span>
<span class="org-string">                                          &lt;/ul&gt;</span>
<span class="org-string">                                        &lt;/nav&gt;</span>
<span class="org-string">                                      &lt;/div&gt;</span>
<span class="org-string">                                    &lt;/div&gt;</span>
<span class="org-string">                                    &lt;h1 class=\"title\"&gt;%t&lt;/h1&gt;</span>
<span class="org-string">                                    &lt;p class=\"subtitle\"&gt;%s&lt;/p&gt; &lt;br/&gt;</span>
<span class="org-string">                                    &lt;p class=\"updated\"&gt;&lt;a href=\"/contact#article-history\"&gt;Updated:&lt;/a&gt; %C&lt;/p&gt;"</span>

         <span class="org-comment-delimiter">;; </span><span class="org-comment">Article Postamble includes</span>
         <span class="org-comment-delimiter">;; </span><span class="org-comment">Javascript snippet to insert anchor links to Table of Contents</span>
         <span class="org-comment-delimiter">;; </span><span class="org-comment">HTML Footer</span>
         <span class="org-builtin">:html-postamble</span> <span class="org-string">"&lt;script&gt;</span>
<span class="org-string">                              const headers = Array.from( document.querySelectorAll('h2, h3, h4, h5, h6') );</span>

<span class="org-string">                              headers.forEach( header =&gt; {</span>
<span class="org-string">                                header.insertAdjacentHTML('afterbegin',</span>
<span class="org-string">                                 '&lt;a href=\"#table-of-contents\"&gt;&amp;#8689;&lt;/a&gt;'</span>
<span class="org-string">                                );</span>
<span class="org-string">                              });</span>
<span class="org-string">                              &lt;/script&gt;</span>
<span class="org-string">                              &lt;hr/&gt;</span>
<span class="org-string">                              &lt;footer&gt;</span>
<span class="org-string">                                &lt;div class=\"copyright-container\"&gt;</span>
<span class="org-string">                                  &lt;div class=\"copyright\"&gt;</span>
<span class="org-string">                                    Comments? Corrections? &lt;a href=\"https://hanshenwang.com/contact\"&gt; Please do reach out.&lt;/a&gt;&lt;a href=\"https://hanshenwang.com/blog/rss.xml\"&gt; RSS Feed. &lt;/a&gt;&lt;br/&gt;</span>
<span class="org-string">                                    Copyright &amp;copy; 2021 Hanshen Wang. Some Rights Reserved.&lt;br/&gt;</span>
<span class="org-string">                                    Content is available under</span>
<span class="org-string">                                    &lt;a rel=\"license\" href=\"http://creativecommons.org/licenses/by-sa/4.0/\"&gt;</span>
<span class="org-string">                                      CC-BY-SA 4.0</span>
<span class="org-string">                                    &lt;/a&gt; unless otherwise noted.</span>
<span class="org-string">                                  &lt;/div&gt;</span>
<span class="org-string">                                  &lt;div class=\"cc-badge\"&gt;</span>
<span class="org-string">                                    &lt;a rel=\"license\" href=\"http://creativecommons.org/licenses/by-sa/4.0/\"&gt;</span>
<span class="org-string">                                      &lt;img alt=\"Creative Commons License\"</span>
<span class="org-string">                                           src=\"https://i.creativecommons.org/l/by-sa/4.0/88x31.png\" /&gt;</span>
<span class="org-string">                                    &lt;/a&gt;</span>
<span class="org-string">                                  &lt;/div&gt;</span>
<span class="org-string">                                  &lt;div class=\"rss-badge\"&gt;</span>
<span class="org-string">                                    &lt;a rel=\"license\" href=\"http://hanshenwang.com/blog/rss.xml\"&gt;</span>
<span class="org-string">                                      &lt;img alt=\"Really Simple Syndication - RSS\"</span>
<span class="org-string">                                           src=\"https://upload.wikimedia.org/wikipedia/en/thumb/4/43/Feed-icon.svg/50px-Feed-icon.svg.png\" /&gt;</span>
<span class="org-string">                                    &lt;/a&gt;</span>
<span class="org-string">                                  &lt;/div&gt;</span>
<span class="org-string">                                &lt;/div&gt;</span>

<span class="org-string">                                &lt;div class=\"generated\"&gt;</span>
<span class="org-string">                                  Created with %c on &lt;a href=\"https://www.gnu.org\"&gt;GNU&lt;/a&gt;/&lt;a href=\"https://www.kernel.org/\"&gt;Linux&lt;/a&gt;</span>
<span class="org-string">                                &lt;/div&gt;</span>
<span class="org-string">                              &lt;/footer&gt;"</span>
         <span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"blog-rss"</span>
         <span class="org-builtin">:base-directory</span> <span class="org-string">"~/Dropbox/project-maria/blog"</span>
         <span class="org-builtin">:base-extension</span> <span class="org-string">"org"</span>
         <span class="org-builtin">:publishing-directory</span> <span class="org-string">"~/project-isidore/assets/blog"</span>
         <span class="org-builtin">:publishing-function</span> publish-posts-rss-feed
         <span class="org-builtin">:rss-extension</span> <span class="org-string">"xml"</span>
         <span class="org-builtin">:html-link-home</span> <span class="org-string">"http://hanshenwang.com/"</span>
         <span class="org-builtin">:html-link-use-abs-url</span> t
         <span class="org-builtin">:html-link-org-files-as-html</span> t
         <span class="org-builtin">:exclude</span> <span class="org-string">"archive.org"</span>
         <span class="org-builtin">:auto-sitemap</span> t
         <span class="org-builtin">:sitemap-function</span> posts-rss-feed
         <span class="org-builtin">:sitemap-title</span> <span class="org-string">"Hanshen Wang Blog RSS"</span>
         <span class="org-builtin">:sitemap-filename</span> <span class="org-string">"rss.org"</span>
         <span class="org-builtin">:sitemap-style</span> list
         <span class="org-builtin">:sitemap-sort-files</span> anti-chronologically
         <span class="org-builtin">:sitemap-format-entry</span> format-posts-rss-feed-entry<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">https://alhassy.github.io/AlBasmala#Clickable-Headlines</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/ensure-headline-ids</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;rest</span> _<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Org trees without a custom ID will have</span>
<span class="org-doc">                              All non-alphanumeric characters are cleverly replaced with &#8216;-&#8217;.</span>

<span class="org-doc">                              If multiple trees end-up with the same id property, issue a</span>
<span class="org-doc">                              message and undo any property insertion thus far.</span>

<span class="org-doc">                              E.g., &#8623; We'll go on a &#8704;&#8707;&#8645; adventure</span>
<span class="org-doc">                                 &#8614;  We'll-go-on-a-adventure</span>
<span class="org-doc">                              "</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>ids<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>org-map-entries
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-5">()</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">org-with-point-at</span> <span class="org-rainbow-delimiters-depth-6">(</span>point<span class="org-rainbow-delimiters-depth-6">)</span>
         <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>id <span class="org-rainbow-delimiters-depth-9">(</span>org-entry-get nil <span class="org-string">"CUSTOM_ID"</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
           <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">unless</span> id
             <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">thread-last</span> <span class="org-rainbow-delimiters-depth-9">(</span>nth <span class="org-highlight-numbers-number">4</span> <span class="org-rainbow-delimiters-depth-1">(</span>org-heading-components<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
               <span class="org-rainbow-delimiters-depth-9">(</span>s-replace-regexp <span class="org-string">"[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">[:alnum:]']"</span> <span class="org-string">"-"</span><span class="org-rainbow-delimiters-depth-9">)</span>
               <span class="org-rainbow-delimiters-depth-9">(</span>s-replace-regexp <span class="org-string">"-+"</span> <span class="org-string">"-"</span><span class="org-rainbow-delimiters-depth-9">)</span>
               <span class="org-rainbow-delimiters-depth-9">(</span>s-chop-prefix <span class="org-string">"-"</span><span class="org-rainbow-delimiters-depth-9">)</span>
               <span class="org-rainbow-delimiters-depth-9">(</span>s-chop-suffix <span class="org-string">"-"</span><span class="org-rainbow-delimiters-depth-9">)</span>
               <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-keyword">setq</span> id<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
             <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-9">(</span>not <span class="org-rainbow-delimiters-depth-1">(</span>member id ids<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                 <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-keyword">push</span> id ids<span class="org-rainbow-delimiters-depth-9">)</span>
               <span class="org-rainbow-delimiters-depth-9">(</span>message-box <span class="org-string">"Oh no, a repeated id!\n\n\t%s"</span> id<span class="org-rainbow-delimiters-depth-9">)</span>
               <span class="org-rainbow-delimiters-depth-9">(</span>undo<span class="org-rainbow-delimiters-depth-9">)</span>
               <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-keyword">setq</span> quit-flag t<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
             <span class="org-rainbow-delimiters-depth-8">(</span>org-entry-put nil <span class="org-string">"CUSTOM_ID"</span> id<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Whenever html &amp; md export happens, ensure we have headline ids.</span>
<span class="org-rainbow-delimiters-depth-1">(</span>advice-add 'org-html-export-to-html   <span class="org-builtin">:before</span> 'my/ensure-headline-ids<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>advice-add 'org-md-export-to-markdown <span class="org-builtin">:before</span> 'my/ensure-headline-ids<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">https://nicolasknoebber.com/posts/blogging-with-emacs-and-org.html</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">format-posts-rss-feed-entry</span> <span class="org-rainbow-delimiters-depth-2">(</span>entry _style project<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Format ENTRY for the posts RSS feed in PROJECT."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>org-publish-initialize-cache <span class="org-string">"blog-rss"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>title <span class="org-rainbow-delimiters-depth-5">(</span>org-publish-find-title entry project<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>link <span class="org-rainbow-delimiters-depth-5">(</span>concat <span class="org-string">"blog/"</span> <span class="org-rainbow-delimiters-depth-6">(</span>file-name-sans-extension entry<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-string">".html"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>author <span class="org-rainbow-delimiters-depth-5">(</span>org-publish-find-property entry <span class="org-builtin">:author</span> project<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>pubdate <span class="org-rainbow-delimiters-depth-5">(</span>format-time-string <span class="org-rainbow-delimiters-depth-6">(</span>car org-time-stamp-formats<span class="org-rainbow-delimiters-depth-6">)</span>
                                      <span class="org-rainbow-delimiters-depth-6">(</span>org-publish-find-date entry project<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>message pubdate<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>format <span class="org-string">"%s</span>
<span class="org-string">                :properties:</span>
<span class="org-string">                :rss_permalink: %s</span>
<span class="org-string">                :author: %s</span>
<span class="org-string">                :pubdate: %s</span>
<span class="org-string">                :end:\n"</span>
            title
            link
            author
            pubdate<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">posts-rss-feed</span> <span class="org-rainbow-delimiters-depth-2">(</span>title list<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Generate a sitemap of posts that is exported as a RSS feed.</span>
<span class="org-doc">                TITLE is the title of the RSS feed.  LIST is an internal</span>
<span class="org-doc">                representation for the files to include.  PROJECT is the current</span>
<span class="org-doc">                project."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>concat
   <span class="org-string">"#+TITLE: "</span> title <span class="org-string">"\n#+EMAIL: hanshen@hanshenwang.com"</span> <span class="org-string">"\n\n"</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>org-list-to-subtree list<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">publish-posts-rss-feed</span> <span class="org-rainbow-delimiters-depth-2">(</span>plist filename dir<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Publish PLIST to RSS when FILENAME is rss.org.</span>
<span class="org-doc">                DIR is the location of the output."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>equal <span class="org-string">"rss.org"</span> <span class="org-rainbow-delimiters-depth-4">(</span>file-name-nondirectory filename<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>org-rss-publish-to-rss plist filename dir<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Other exemplars here: <a href="https://old.reddit.com/r/emacs/comments/ng9hyq/good_tutorials_on_orgpublish/">good tutorials on org-publish : emacs</a>
</p>
</div>
</div>

<div id="outline-container-org2c59d48" class="outline-2">
<h2 id="Application"><span class="section-number-2">5</span> Application</h2>
<div class="outline-text-2" id="text-Application">
<p>
The Application itself is still very barebones. It does two things: serve
static blog content, and generate the CSS and JS assets upon startup.
</p>

<div class="org-src-container">
<pre class="src src-lisp" id="org0f77df2"><span class="org-comment-delimiter">;;;; </span><span class="org-comment">================</span>
<span class="org-comment-delimiter">;;;; </span><span class="org-comment">application.lisp</span>
<span class="org-comment-delimiter">;;;; </span><span class="org-comment">================</span>
<span class="org-comment-delimiter">;;;; </span><span class="org-comment">initialize-application is the function launched by the heroku buildpack. This has been moved to heroku.lisp as the function must be under the "cl-user" namespace and not project-isidore.</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defpackage</span> <span class="org-comment-delimiter">#:</span><span class="org-doc">project-isidore</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">:use means there is no need to prefix hunchentoot:define-easy-handler and instead use just define-easy-handler</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">As per https://lispcookbook.github.io/cl-cookbook/packages.html#about-use-ing-packages-being-a-bad-practice,</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">use nicknames instead</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:use</span> <span class="org-comment-delimiter">#:</span><span class="org-doc">cl</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:local-nicknames</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-comment-delimiter">#:</span><span class="org-doc">ws</span> <span class="org-comment-delimiter">#:</span><span class="org-doc">hunchentoot</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-comment">; web server</span>
                    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-comment-delimiter">#:</span><span class="org-doc">ht</span> <span class="org-comment-delimiter">#:</span><span class="org-doc">cl-who</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-comment">; hypertext markup generation</span>
                    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-comment-delimiter">#:</span><span class="org-doc">css</span> <span class="org-comment-delimiter">#:</span><span class="org-doc">cl-css</span><span class="org-rainbow-delimiters-depth-3">)</span>
                    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-comment-delimiter">#:</span><span class="org-doc">js</span> <span class="org-comment-delimiter">#:</span><span class="org-doc">parenscript</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:export</span> <span class="org-comment-delimiter">#:</span><span class="org-doc">start-dev-server</span>
           <span class="org-comment-delimiter">#:</span><span class="org-doc">stop-dev-server</span>
           <span class="org-comment-delimiter">#:</span><span class="org-doc">generate-index-css</span>
           <span class="org-comment-delimiter">#:</span><span class="org-doc">generate-global-css</span>
           <span class="org-comment-delimiter">#:</span><span class="org-doc">generate-index-js</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">This must match the defpackage above, remember repl upon startup defaults to cl-user package.</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">in-package</span> <span class="org-comment-delimiter">#:</span><span class="org-doc">project-isidore</span><span class="org-rainbow-delimiters-depth-1">)</span>
&#12;
<span class="org-comment-delimiter">;; </span><span class="org-comment">The double colons are to access unexported functions &amp; symbols</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">single colon if it is exported. Be careful with unexported/internal symbols</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Other than the landing page (aka "index.html") all other web app pages uses this boilerplate</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Taken from  https://github.com/rajasegar/cl-bootstrap/blob/master/demo/demo.lisp</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defmacro</span> <span class="org-function-name">app-page</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">&amp;key</span> title<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-type">&amp;body</span> body<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">=, g g= to call =jump-to-definition=</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">https://stackoverflow.com/questions/30150186/what-does-backtick-mean-in-lisp</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">http://www.lispworks.com/documentation/HyperSpec/Body/02_df.htm</span>
  `<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">ht:with-html-output-to-string</span> <span class="org-rainbow-delimiters-depth-3">(</span>*standard-output* nil <span class="org-builtin">:prologue</span> t <span class="org-builtin">:indent</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:html</span> <span class="org-builtin">:lang</span> <span class="org-string">"en"</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:head</span>
             <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:meta</span> <span class="org-builtin">:charset</span> <span class="org-string">"utf-8"</span> <span class="org-builtin">:name</span> <span class="org-string">"viewport"</span> <span class="org-builtin">:content</span> <span class="org-string">"width=device-width, initial-scale=1"</span><span class="org-rainbow-delimiters-depth-5">)</span>
             <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:title</span>, title<span class="org-rainbow-delimiters-depth-5">)</span>
             <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:link</span> <span class="org-builtin">:rel</span> <span class="org-string">"preconnect"</span> <span class="org-builtin">:href=</span><span class="org-string">"https://fonts.googleapis.com"</span><span class="org-rainbow-delimiters-depth-5">)</span>
             <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:link</span> <span class="org-builtin">:rel</span> <span class="org-string">"preconnect"</span> <span class="org-builtin">:href=</span><span class="org-string">"https://fonts.gstatic.com"</span> <span class="org-builtin">:crossorigin</span><span class="org-rainbow-delimiters-depth-5">)</span>
             <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:link</span> <span class="org-builtin">:href</span>  <span class="org-string">"https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500&amp;family=EB+Garamond:ital@0;1&amp;family=Montserrat:ital@0;1&amp;display=swap"</span> <span class="org-builtin">:rel</span> <span class="org-string">"stylesheet"</span><span class="org-rainbow-delimiters-depth-5">)</span>
             <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:link</span> <span class="org-builtin">:type</span> <span class="org-string">"text/css"</span> <span class="org-builtin">:href</span> <span class="org-string">"global.css"</span> <span class="org-builtin">:rel</span> <span class="org-string">"stylesheet"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:body</span>
             <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:div</span> <span class="org-builtin">:class</span> <span class="org-string">"header header-fixed"</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:div</span> <span class="org-builtin">:class</span> <span class="org-string">"navbar container"</span>
                         <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:div</span> <span class="org-builtin">:class</span> <span class="org-string">"logo"</span> <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:href</span> <span class="org-string">"/"</span> <span class="org-string">"Hanshen Wang"</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                         <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:input</span> <span class="org-builtin">:type</span> <span class="org-string">"checkbox"</span> <span class="org-builtin">:id</span> <span class="org-string">"navbar-toggle"</span><span class="org-rainbow-delimiters-depth-7">)</span>
                         <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:label</span> <span class="org-builtin">:for</span> <span class="org-string">"navbar-toggle"</span> <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-builtin">:i</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                         <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:nav</span> <span class="org-builtin">:class</span> <span class="org-string">"menu"</span>
                               <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-builtin">:ul</span>
                                <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:li</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:href</span> <span class="org-string">"/about"</span> <span class="org-string">"About"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                                <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:li</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:href</span> <span class="org-string">"/work"</span> <span class="org-string">"Work"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                                <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:li</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:href</span> <span class="org-string">"/blog/archive.html"</span> <span class="org-string">"Blog"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                                <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:li</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:href</span> <span class="org-string">"/contact"</span> <span class="org-string">"Contact"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
             <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:div</span> <span class="org-builtin">:class</span> <span class="org-string">"main"</span> ,@body<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:hr</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:footer</span>
             <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:div</span> <span class="org-builtin">:class</span> <span class="org-string">"copyright-container"</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:div</span> <span class="org-builtin">:class</span> <span class="org-string">"copyright"</span> <span class="org-string">"Copyright &amp;copy; 2021 Hanshen Wang. All Rights Reserved."</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">ws:define-easy-handler</span> <span class="org-rainbow-delimiters-depth-2">(</span>root <span class="org-builtin">:uri</span> <span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">ht:with-html-output-to-string</span> <span class="org-rainbow-delimiters-depth-3">(</span>*standard-output* nil <span class="org-builtin">:prologue</span> t <span class="org-builtin">:indent</span> t<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:html</span> <span class="org-builtin">:lang</span> <span class="org-string">"en"</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:head</span>
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:meta</span> <span class="org-builtin">:charset</span> <span class="org-string">"utf-8"</span> <span class="org-builtin">:name</span> <span class="org-string">"viewport"</span> <span class="org-builtin">:content</span>
                   <span class="org-string">"width=device-width, initial-scale=1"</span> <span class="org-builtin">:description</span> <span class="org-string">"Personal Web Application"</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:title</span> <span class="org-string">"HanshenWang.com"</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:link</span> <span class="org-builtin">:rel</span> <span class="org-string">"preconnect"</span> <span class="org-builtin">:href</span> <span class="org-string">"https://fonts.googleapis.com"</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:link</span> <span class="org-builtin">:rel</span> <span class="org-string">"preconnect"</span> <span class="org-builtin">:href</span> <span class="org-string">"https://fonts.gstatic.com"</span> <span class="org-builtin">:crossorigin</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:link</span> <span class="org-builtin">:href</span>  <span class="org-string">"https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500&amp;family=EB+Garamond:ital@0;1&amp;family=Montserrat:ital@0;1&amp;display=swap"</span> <span class="org-builtin">:rel</span> <span class="org-string">"stylesheet"</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:link</span> <span class="org-builtin">:type</span> <span class="org-string">"text/css"</span> <span class="org-builtin">:href</span> <span class="org-string">"index.css"</span> <span class="org-builtin">:rel</span> <span class="org-string">"stylesheet"</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:script</span> <span class="org-builtin">:src</span> <span class="org-string">"index.js"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
           <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:body</span>
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:ul</span> <span class="org-builtin">:class</span> <span class="org-string">"cb-slideshow"</span> <span class="org-comment">; background CSS3 slideshow</span>
                 <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:li</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:span</span> <span class="org-string">"pic1.webp"</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                 <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:li</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:span</span> <span class="org-string">"pic2.webp"</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                 <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:li</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:span</span> <span class="org-string">"pic3.webp"</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                 <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:li</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:span</span> <span class="org-string">"pic4.webp"</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                 <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:li</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:span</span> <span class="org-string">"pic5.webp"</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                 <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:li</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:span</span> <span class="org-string">"pic6.webp"</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:div</span> <span class="org-builtin">:class</span> <span class="org-string">"container"</span>
                  <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:header</span>
                   <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:div</span> <span class="org-builtin">:class</span> <span class="org-string">"portfolio-container"</span>
                         <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-builtin">:div</span> <span class="org-builtin">:class</span> <span class="org-string">"portfolio-section"</span>
                               <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:img</span> <span class="org-builtin">:src</span> <span class="org-string">"profile.webp"</span> <span class="org-builtin">:alt</span> <span class="org-string">"Author Profile Picture"</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                         <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-builtin">:div</span> <span class="org-builtin">:class</span> <span class="org-string">"portfolio-section"</span>
                               <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:h1</span> <span class="org-string">"Hey There!"</span><span class="org-rainbow-delimiters-depth-9">)</span> <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:br</span><span class="org-rainbow-delimiters-depth-9">)</span>
                               <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:h2</span> <span class="org-string">"I'm Hanshen."</span><span class="org-rainbow-delimiters-depth-9">)</span> <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:br</span><span class="org-rainbow-delimiters-depth-9">)</span>
                               <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:h2</span> <span class="org-string">"Nice to meet you."</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                   <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:hr</span><span class="org-rainbow-delimiters-depth-7">)</span>
                   <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:br</span><span class="org-rainbow-delimiters-depth-7">)</span>
                   <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:p</span> <span class="org-string">"Welcome to my personal website! This website was built</span>
<span class="org-string">  with"</span> <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:href</span> <span class="org-string">"https://nextjs.org"</span> <span class="org-builtin">:target</span> <span class="org-string">"_blank"</span> <span class="org-builtin">:rel</span> <span class="org-string">"noreferrer"</span> <span class="org-string">"&lt;s&gt;</span>
<span class="org-string">  Next.js"</span><span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-string">"and React &lt;/s&gt;"</span> <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:href</span> <span class="org-string">"https://edicl.github.io/hunchentoot/"</span>
                                 <span class="org-builtin">:target</span> <span class="org-string">"_blank"</span> <span class="org-builtin">:rel</span> <span class="org-string">"noreferrer""Hunchentoot"</span><span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-string">"and Common Lisp. My resume can be found under the work tab. I hope you find what you're looking for, and may the wind be always at your back."</span><span class="org-rainbow-delimiters-depth-7">)</span>
                   <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:p</span> <span class="org-builtin">:class</span> <span class="org-string">"portfolio-button"</span>
                       <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:href</span> <span class="org-string">"/about"</span> <span class="org-string">"About"</span><span class="org-rainbow-delimiters-depth-8">)</span>
                       <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:href</span> <span class="org-string">"/work"</span> <span class="org-string">"Work"</span><span class="org-rainbow-delimiters-depth-8">)</span>
                       <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:href</span> <span class="org-string">"/blog/archive.html"</span> <span class="org-string">"Blog"</span><span class="org-rainbow-delimiters-depth-8">)</span>
                       <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:href</span> <span class="org-string">"/contact"</span> <span class="org-string">"Contact"</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">ws:define-easy-handler</span> <span class="org-rainbow-delimiters-depth-2">(</span>about <span class="org-builtin">:uri</span> <span class="org-string">"/about"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>app-page <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:title</span> <span class="org-string">"HanshenWang.com"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:h1</span> <span class="org-builtin">:class</span> <span class="org-string">"title"</span> <span class="org-string">"About"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:h1</span> <span class="org-string">"The story so far..."</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:p</span> <span class="org-string">"Hey there. I'm currently a student up in the Great White North.</span>
<span class="org-string">    Apart from studies and work, I enjoy swimming, piano, and eating</span>
<span class="org-string">    peanut butter straight from the jar."</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:h1</span> <span class="org-string">"Why does this website exist?"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:p</span> <span class="org-string">"This website's raison d'etre is partly because of the free time granted by</span>
<span class="org-string">    the COVID pandemic of 2020-2021. A historic event, and my heart goes out to</span>
<span class="org-string">    those suffering still. I am under no illusion the opportunities my station</span>
<span class="org-string">    in life affords me. In the same vein of thought, I built this website</span>
<span class="org-string">    because the internet -- in its current form -- has given me countless graces</span>
<span class="org-string">    (and temptations, but that's to be expected). So please forgive my</span>
<span class="org-string">    amateurish writing, for it is my wish that you will take away something of</span>
<span class="org-string">    use, and pay it forwards."</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">ws:define-easy-handler</span> <span class="org-rainbow-delimiters-depth-2">(</span>work <span class="org-builtin">:uri</span> <span class="org-string">"/work"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>app-page <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:title</span> <span class="org-string">"HanshenWang.com"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:h1</span> <span class="org-builtin">:class</span> <span class="org-string">"title"</span> <span class="org-string">"Work"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:h1</span> <span class="org-string">"Professional Portfolio "</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:target</span> <span class="org-string">"_blank"</span> <span class="org-builtin">:href</span> <span class="org-string">"https://drive.google.com/file/d/1-D_CkQhgazvBCNr5v3CyxEbHZRXFYXKy/view?usp=sharing"</span> <span class="org-string">"Click this link to view or download my resume (link to Google Drive)."</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:br</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:p</span> <span class="org-string">"Please kindly"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:href</span> <span class="org-string">"/contact"</span> <span class="org-string">"shoot me an email"</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"should the link above be broken."</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:h1</span> <span class="org-string">"Side Projects"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:p</span> <span class="org-string">"Here one will find my Github repos, my book/course notes (all mistakes are mine), and any other miscellaneous items that can be used at one's leisure. As with the above,"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:href</span> <span class="org-string">"/contact"</span> <span class="org-string">"do contact me"</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"if something is missing"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:ul</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:li</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:target</span> <span class="org-string">"_blank"</span> <span class="org-builtin">:href</span> <span class="org-string">"https://github.com/HanshenWang"</span> <span class="org-string">"Github Repositories"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:li</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:href</span> <span class="org-string">"/blog/archive.html"</span> <span class="org-string">"Collected Notes"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">ws:define-easy-handler</span> <span class="org-rainbow-delimiters-depth-2">(</span>contact <span class="org-builtin">:uri</span> <span class="org-string">"/contact"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>app-page <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:title</span> <span class="org-string">"HanshenWang.com"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:h1</span> <span class="org-builtin">:class</span> <span class="org-string">"title"</span> <span class="org-string">"Contact"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:h1</span> <span class="org-string">"Ways to get in contact"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">https://stackoverflow.com/questions/483212/effective-method-to-hide-email-from-spam-bots</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:p</span> <span class="org-string">"Questions, comments, death threats? Don't hesitate to reach out to me via email at:"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:class</span> <span class="org-string">"cryptedmail"</span> <span class="org-builtin">:data-name</span> <span class="org-string">"hanshen"</span> <span class="org-builtin">:data-domain</span> <span class="org-string">"hanshenwang"</span> <span class="org-builtin">:data-tld</span> <span class="org-string">"com"</span> <span class="org-builtin">:onclick</span> <span class="org-string">"window.location.href = 'mailto:' + this.dataset.name + '@' + this.dataset.domain + '.' + this.dataset.tld; return false;"</span> <span class="org-builtin">:href</span> <span class="org-string">"#"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:p</span> <span class="org-string">"My PGP Key Fingerprint:  06DD A936 90F7 75E3 715B 628C CA94 9A6D 46BC 2BBE"</span><span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:p</span> <span class="org-string">"My PGP Public Key is available"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:target</span> <span class="org-string">"_blank"</span> <span class="org-builtin">:href</span>
  <span class="org-string">"0x06DDA93690F775E3715B628CCA949A6D46BC2BBE.asc"</span> <span class="org-string">"here"</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"and as a secondary</span>
<span class="org-string">  source, at"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:target</span> <span class="org-string">"_blank"</span> <span class="org-builtin">:href</span> <span class="org-string">"https://keys.openpgp.org"</span> <span class="org-string">"https://keys.openpgp.org."</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:h1</span> <span class="org-builtin">:id</span> <span class="org-string">"article-history"</span> <span class="org-string">"Blog Article Transparency Policy"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:p</span> <span class="org-string">"All edits made to an article after the initial publication date can be found"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:a</span> <span class="org-builtin">:target</span> <span class="org-string">"_blank"</span> <span class="org-builtin">:href</span> <span class="org-string">"https://github.com/HanshenWang/project-isidore/"</span> <span class="org-string">"in the version-controlled Github repository (under the /assets/blog/ folder)."</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">generate-index-css</span> <span class="org-rainbow-delimiters-depth-2">(</span>output-location<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Generated index.css file for index.html use. When using cl-css, \"~~\" is</span>
<span class="org-doc">  needed to output a single \"~\", otherwise an error will be thrown"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>css:compile-css
   output-location
   '<span class="org-rainbow-delimiters-depth-3">(</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">CSS Background Slideshow</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".cb-slideshow,.cb-slideshow:after"</span>
      <span class="org-builtin">:position</span><span class="org-string">" fixed"</span>
      <span class="org-builtin">:width</span><span class="org-string">" 100%"</span>
      <span class="org-builtin">:height</span><span class="org-string">" 100%"</span>
      <span class="org-builtin">:top</span><span class="org-string">" 0px"</span>
      <span class="org-builtin">:left</span><span class="org-string">" 0px"</span>
      <span class="org-builtin">:z-index</span><span class="org-string">" 0"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".cb-slideshow:after"</span>
      <span class="org-builtin">:content</span><span class="org-string">" ''"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".cb-slideshow li span"</span>
      <span class="org-builtin">:width</span><span class="org-string">" 100%"</span>
      <span class="org-builtin">:height</span><span class="org-string">" 100%"</span>
      <span class="org-builtin">:position</span><span class="org-string">" absolute"</span>
      <span class="org-builtin">:top</span><span class="org-string">" 0px"</span>
      <span class="org-builtin">:left</span><span class="org-string">" 0px"</span>
      <span class="org-builtin">:color</span><span class="org-string">" transparent"</span>
      <span class="org-builtin">:background-size</span><span class="org-string">" cover"</span>
      <span class="org-builtin">:background-position</span><span class="org-string">" 50% 50%"</span>
      <span class="org-builtin">:background-repeat</span><span class="org-string">" none"</span>
      <span class="org-builtin">:opacity</span><span class="org-string">" 0"</span>
      <span class="org-builtin">:z-index</span><span class="org-string">" 0"</span>
      <span class="org-builtin">:-webkit-backface-visibility</span><span class="org-string">" hidden"</span>
      <span class="org-builtin">:-webkit-animation</span><span class="org-string">" imageAnimation 36s linear infinite 0s"</span>
      <span class="org-builtin">:-moz-animation</span><span class="org-string">" imageAnimation 36s linear infinite 0s"</span>
      <span class="org-builtin">:-o-animation</span><span class="org-string">" imageAnimation 36s linear infinite 0s"</span>
      <span class="org-builtin">:-ms-animation</span><span class="org-string">" imageAnimation 36s linear infinite 0s"</span>
      <span class="org-builtin">:animation</span><span class="org-string">" imageAnimation 36s linear infinite 0s"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".cb-slideshow li:nth-child(1) span"</span>
      <span class="org-builtin">:background-image</span> <span class="org-string">"url(pic1.webp)"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".cb-slideshow li:nth-child(2) span"</span>
      <span class="org-builtin">:background-image</span> <span class="org-string">"url(pic2.webp)"</span>
      <span class="org-builtin">:-webkit-animation-delay</span><span class="org-string">" 6s"</span>
      <span class="org-builtin">:-moz-animation-delay</span><span class="org-string">" 6s"</span>
      <span class="org-builtin">:-o-animation-delay</span><span class="org-string">" 6s"</span>
      <span class="org-builtin">:-ms-animation-delay</span><span class="org-string">" 6s"</span>
      <span class="org-builtin">:animation-delay</span><span class="org-string">" 6s"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".cb-slideshow li:nth-child(3) span"</span>
      <span class="org-builtin">:background-image</span><span class="org-string">" url(pic3.webp)"</span>
      <span class="org-builtin">:-webkit-animation-delay</span><span class="org-string">" 12s"</span>
      <span class="org-builtin">:-moz-animation-delay</span><span class="org-string">" 12s"</span>
      <span class="org-builtin">:-o-animation-delay</span><span class="org-string">" 12s"</span>
      <span class="org-builtin">:-ms-animation-delay</span><span class="org-string">" 12s"</span>
      <span class="org-builtin">:animation-delay</span><span class="org-string">" 12s"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".cb-slideshow li:nth-child(4) span"</span>
      <span class="org-builtin">:background-image</span><span class="org-string">" url(pic4.webp)"</span>
      <span class="org-builtin">:-webkit-animation-delay</span><span class="org-string">" 18s"</span>
      <span class="org-builtin">:-moz-animation-delay</span><span class="org-string">" 18s"</span>
      <span class="org-builtin">:-o-animation-delay</span><span class="org-string">" 18s"</span>
      <span class="org-builtin">:-ms-animation-delay</span><span class="org-string">" 18s"</span>
      <span class="org-builtin">:animation-delay</span><span class="org-string">" 18s"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".cb-slideshow li:nth-child(5) span"</span>
      <span class="org-builtin">:background-image</span><span class="org-string">" url(pic5.webp)"</span>
      <span class="org-builtin">:-webkit-animation-delay</span><span class="org-string">" 24s"</span>
      <span class="org-builtin">:-moz-animation-delay</span><span class="org-string">" 24s"</span>
      <span class="org-builtin">:-o-animation-delay</span><span class="org-string">" 24s"</span>
      <span class="org-builtin">:-ms-animation-delay</span><span class="org-string">" 24s"</span>
      <span class="org-builtin">:animation-delay</span><span class="org-string">" 24s"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".cb-slideshow li:nth-child(6) span"</span>
      <span class="org-builtin">:background-image</span><span class="org-string">" url(pic6.webp)"</span>
      <span class="org-builtin">:-webkit-animation-delay</span><span class="org-string">" 30s"</span>
      <span class="org-builtin">:-moz-animation-delay</span><span class="org-string">" 30s"</span>
      <span class="org-builtin">:-o-animation-delay</span><span class="org-string">" 30s"</span>
      <span class="org-builtin">:-ms-animation-delay</span><span class="org-string">" 30s"</span>
      <span class="org-builtin">:animation-delay</span><span class="org-string">" 30s"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".cb-slideshow li:nth-child(2) div"</span>
      <span class="org-builtin">:-webkit-animation-delay</span><span class="org-string">" 6s"</span>
      <span class="org-builtin">:-moz-animation-delay</span><span class="org-string">" 6s"</span>
      <span class="org-builtin">:-o-animation-delay</span><span class="org-string">" 6s"</span>
      <span class="org-builtin">:-ms-animation-delay</span><span class="org-string">" 6s"</span>
      <span class="org-builtin">:animation-delay</span><span class="org-string">" 6s"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".cb-slideshow li:nth-child(3) div"</span>
      <span class="org-builtin">:-webkit-animation-delay</span><span class="org-string">" 12s"</span>
      <span class="org-builtin">:-moz-animation-delay</span><span class="org-string">" 12s"</span>
      <span class="org-builtin">:-o-animation-delay</span><span class="org-string">" 12s"</span>
      <span class="org-builtin">:-ms-animation-delay</span><span class="org-string">" 12s"</span>
      <span class="org-builtin">:animation-delay</span><span class="org-string">" 12s"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".cb-slideshow li:nth-child(4) div"</span>
      <span class="org-builtin">:-webkit-animation-delay</span><span class="org-string">" 18s"</span>
      <span class="org-builtin">:-moz-animation-delay</span><span class="org-string">" 18s"</span>
      <span class="org-builtin">:-o-animation-delay</span><span class="org-string">" 18s"</span>
      <span class="org-builtin">:-ms-animation-delay</span><span class="org-string">" 18s"</span>
      <span class="org-builtin">:animation-delay</span><span class="org-string">" 18s"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".cb-slideshow li:nth-child(5) div"</span>
      <span class="org-builtin">:-webkit-animation-delay</span><span class="org-string">" 24s"</span>
      <span class="org-builtin">:-moz-animation-delay</span><span class="org-string">" 24s"</span>
      <span class="org-builtin">:-o-animation-delay</span><span class="org-string">" 24s"</span>
      <span class="org-builtin">:-ms-animation-delay</span><span class="org-string">" 24s"</span>
      <span class="org-builtin">:animation-delay</span><span class="org-string">" 24s"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".cb-slideshow li:nth-child(6) div"</span>
      <span class="org-builtin">:-webkit-animation-delay</span><span class="org-string">" 30s"</span>
      <span class="org-builtin">:-moz-animation-delay</span><span class="org-string">" 30s"</span>
      <span class="org-builtin">:-o-animation-delay</span><span class="org-string">" 30s"</span>
      <span class="org-builtin">:-ms-animation-delay</span><span class="org-string">" 30s"</span>
      <span class="org-builtin">:animation-delay</span><span class="org-string">" 30s"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">Animation for the slideshow images</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"@-webkit-keyframes imageAnimation"</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"0%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 0"</span>
       <span class="org-builtin">:-webkit-animation-timing-function</span><span class="org-string">" ease-in"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"8%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 1"</span>
       <span class="org-builtin">:-webkit-animation-timing-function</span><span class="org-string">" ease-out"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"17%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 1"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"25%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 0"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"100%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 0"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"@-moz-keyframes imageAnimation"</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"0%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 0"</span>
       <span class="org-builtin">:-moz-animation-timing-function</span><span class="org-string">" ease-in"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"8%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 1"</span>
       <span class="org-builtin">:-moz-animation-timing-function</span><span class="org-string">" ease-out"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"17%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 1"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"25%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 0"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"100%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 0"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"@-o-keyframes imageAnimation"</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"0%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 0"</span>
       <span class="org-builtin">:-o-animation-timing-function</span><span class="org-string">" ease-in"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"8%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 1"</span>
       <span class="org-builtin">:-o-animation-timing-function</span><span class="org-string">" ease-out"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"17%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 1"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"25%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 0"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"100%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 0"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"@-ms-keyframes imageAnimation"</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"0%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 0"</span>
       <span class="org-builtin">:-ms-animation-timing-function</span><span class="org-string">" ease-in"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"8%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 1"</span>
       <span class="org-builtin">:-ms-animation-timing-function</span><span class="org-string">" ease-out"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"17%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 1"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"25%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 0"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"100%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 0"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"@keyframes imageAnimation"</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"0%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 0"</span>
       <span class="org-builtin">:animation-timing-function</span><span class="org-string">" ease-in"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"8%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 1"</span>
       <span class="org-builtin">:animation-timing-function</span><span class="org-string">" ease-out"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"17%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 1"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"25%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 0"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"100%"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 0"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">Show at least something when animations not supported</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".no-cssanimations .cb-slideshow li span"</span>
      <span class="org-builtin">:opacity</span><span class="org-string">" 1"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">General Demo Style</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"html,body,div,dl,dt,dd,ul,ol,li,h1,h2,pre,form,fieldset,input,textarea,p,blockquote,th,td"</span> <span class="org-builtin">:margin</span> <span class="org-highlight-numbers-number">0</span> <span class="org-builtin">:padding</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"body"</span>
      <span class="org-builtin">:background</span><span class="org-string">" #000"</span>
      <span class="org-builtin">:font-weight</span><span class="org-string">" 400"</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 15px"</span>
      <span class="org-builtin">:color</span><span class="org-string">" #fff"</span>
      <span class="org-builtin">:text-shadow</span><span class="org-string">" 1px 1px 1px rgba(0,0,0,0.2)"</span>
      <span class="org-builtin">:overflow-y</span><span class="org-string">" scroll"</span>
      <span class="org-builtin">:overflow-x</span><span class="org-string">" hidden"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"h1,h2"</span>
      <span class="org-builtin">:font-family</span><span class="org-string">" 'Cinzel', 'Times New Roman', serif"</span>
      <span class="org-builtin">:font-size</span><span class="org-string">"100%"</span>
      <span class="org-builtin">:font-weight</span><span class="org-string">"normal"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"a"</span>
      <span class="org-builtin">:color</span><span class="org-string">" #00d9ff"</span>
      <span class="org-builtin">:text-decoration</span><span class="org-string">" none"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">Black intro panel</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".container"</span>
      <span class="org-builtin">:position</span><span class="org-string">" relative"</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" center"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".container &gt; header"</span>
      <span class="org-builtin">:position</span><span class="org-string">" absolute"</span>
      <span class="org-builtin">:left</span><span class="org-string">" 0"</span>
      <span class="org-builtin">:right</span><span class="org-string">" 0"</span>
      <span class="org-builtin">:top</span><span class="org-string">" 5rem"</span>
      <span class="org-builtin">:margin</span><span class="org-string">" auto"</span>
      <span class="org-builtin">:max-width</span><span class="org-string">" 30rem"</span>
      <span class="org-builtin">:padding</span><span class="org-string">" 3rem 3rem"</span>
      <span class="org-builtin">:background-color</span><span class="org-string">" rgba(0, 0, 0, 0.3)"</span>
      <span class="org-builtin">:border-radius</span><span class="org-string">" 80px"</span>
      <span class="org-builtin">:box-shadow</span><span class="org-string">" 0 0 30px 20px rgba(0,0,0,0.3)"</span>
      <span class="org-builtin">:text-shadow</span><span class="org-string">" 1px 1px 1px rgba(0,0,0,0.2)"</span>
      <span class="org-builtin">:display</span><span class="org-string">" block"</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" center"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".portfolio-container"</span>
      <span class="org-builtin">:display</span><span class="org-string">"flex"</span>
      <span class="org-builtin">:flex-direction</span><span class="org-string">"row"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".portfolio-section"</span>
      <span class="org-builtin">:flex</span><span class="org-string">" 50%"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".container &gt; header img"</span>
      <span class="org-builtin">:width</span><span class="org-string">" 150px"</span>
      <span class="org-builtin">:height</span><span class="org-string">" 150px"</span>
      <span class="org-builtin">:margin</span><span class="org-string">" 0rem auto"</span>
      <span class="org-builtin">:border-radius</span><span class="org-string">" 9999px"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".container &gt; header h1"</span>
      <span class="org-builtin">:font-family</span><span class="org-string">" 'Cinzel', 'Times New Roman', serif"</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 35px"</span>
      <span class="org-builtin">:line-height</span><span class="org-string">" 35px"</span>
      <span class="org-builtin">:position</span><span class="org-string">" relative"</span>
      <span class="org-builtin">:font-weight</span><span class="org-string">" 400"</span>
      <span class="org-builtin">:color</span><span class="org-string">" #fff"</span>
      <span class="org-builtin">:text-shadow</span><span class="org-string">" 1px 1px 1px rgba(0,0,0,0.3)"</span>
      <span class="org-builtin">:padding</span><span class="org-string">" 0px 0px 5px 0px"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".container &gt; header h2"</span>
      <span class="org-builtin">:font-family</span><span class="org-string">" 'Cinzel', 'Times New Roman', serif"</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 1.5em"</span>
      <span class="org-builtin">:font-style</span><span class="org-string">" bold"</span>
      <span class="org-builtin">:color</span><span class="org-string">" #f8f8f8"</span>
      <span class="org-builtin">:text-shadow</span><span class="org-string">" 1px 1px 1px rgba(0,0,0,0.6)"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".container &gt; header p"</span>
      <span class="org-builtin">:font-family</span><span class="org-string">" 'EB Garamond', 'Times New Roman', serif"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">Button Style</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"p.portfolio-button"</span>
      <span class="org-builtin">:display</span><span class="org-string">" block"</span>
      <span class="org-builtin">:padding</span><span class="org-string">" 15px 0px"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span> <span class="org-string">"p.portfolio-button a"</span>
      <span class="org-builtin">:display</span><span class="org-string">" inline-block"</span>
      <span class="org-builtin">:border</span><span class="org-string">" 1px solid #425de6"</span>
      <span class="org-builtin">:padding</span><span class="org-string">" 4px 10px 3px"</span>
      <span class="org-builtin">:font-family</span><span class="org-string">" 'Cinzel', 'Times New Roman', serif"</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 13px"</span>
      <span class="org-builtin">:line-height</span><span class="org-string">" 18px"</span>
      <span class="org-builtin">:margin</span><span class="org-string">" 2px 3px"</span>
      <span class="org-builtin">:font-weight</span><span class="org-string">" 500"</span>
      <span class="org-builtin">:-webkit-box-shadow</span><span class="org-string">" 0px 1px 1px rgba(0,0,0,0.1)"</span>
      <span class="org-builtin">:-moz-box-shadow</span><span class="org-string">"0px 1px 1px rgba(0,0,0,0.1)"</span>
      <span class="org-builtin">:box-shadow</span><span class="org-string">" 0px 1px 1px rgba(0,0,0,0.1)"</span>
      <span class="org-builtin">:color</span><span class="org-string">"#fff"</span>
      <span class="org-builtin">:-webkit-border-radius</span><span class="org-string">" 5px"</span>
      <span class="org-builtin">:-moz-border-radius</span><span class="org-string">" 5px"</span>
      <span class="org-builtin">:border-radius</span><span class="org-string">" 5px"</span>
      <span class="org-builtin">:background</span><span class="org-string">" #6295e3"</span>
      <span class="org-builtin">:background</span><span class="org-string">" -moz-linear-gradient(top, #6295e3 0%, #6286e3 44%, #425de6 100%)"</span>
      <span class="org-builtin">:background</span><span class="org-string">" -webkit-gradient(linear, left top, left bottom, color-stop(0%,#6295e3), color-stop(44%,#6286e3), color-stop(100%,#425de6))"</span>
      <span class="org-builtin">:background</span><span class="org-string">" -webkit-linear-gradient(top, #6295e3 0%,#6286e3 44%,#425de6 100%)"</span>
      <span class="org-builtin">:background</span><span class="org-string">" -o-linear-gradient(top, #6295e3 0%,#6286e3 44%,#425de6 100%)"</span>
      <span class="org-builtin">:background</span><span class="org-string">" -ms-linear-gradient(top, #6295e3 0%,#6286e3 44%,#425de6 100%)"</span>
      <span class="org-builtin">:background</span><span class="org-string">" linear-gradient(top, #6295e3 0%,#6286e3 44%,#425de6 100%)"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"p.portfolio-button a:hover"</span>
      <span class="org-builtin">:background</span><span class="org-string">" #425de6"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"p.portfolio-button a:active"</span>
      <span class="org-builtin">:background</span><span class="org-string">" #425de6"</span>
      <span class="org-builtin">:background</span><span class="org-string">" -moz-linear-gradient(top, #425de6 0%, #6286e3 56%, #6295e3 100%)"</span>
      <span class="org-builtin">:background</span><span class="org-string">" -webkit-gradient(linear, left top, left bottom, color-stop(0%,#425de6), color-stop(56%,#6286e3), color-stop(100%,#6295e3))"</span>
      <span class="org-builtin">:background</span><span class="org-string">" -webkit-linear-gradient(top, #425de6 0%,#6286e3 56%,#6295e3 100%)"</span>
      <span class="org-builtin">:background</span><span class="org-string">" -o-linear-gradient(top, #425de6 0%,#6286e3 56%,#6295e3 100%)"</span>
      <span class="org-builtin">:background</span><span class="org-string">" -ms-linear-gradient(top, #425de6 0%,#6286e3 56%,#6295e3 100%)"</span>
      <span class="org-builtin">:background</span><span class="org-string">" linear-gradient(top, #425de6 0%,#6286e3 56%,#6295e3 100%)"</span>
      <span class="org-builtin">:-webkit-box-shadow</span><span class="org-string">" 0px 1px 1px rgba(255,255,255,0.9)"</span>
      <span class="org-builtin">:-moz-box-shadow</span><span class="org-string">"0px 1px 1px rgba(255,255,255,0.9)"</span>
      <span class="org-builtin">:box-shadow</span><span class="org-string">" 0px 1px 1px rgba(255,255,255,0.9)"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">Media Queries</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"@media screen and (max-width: 767px)"</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">".container &gt; header"</span>
       <span class="org-builtin">:text-align</span><span class="org-string">" center"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"p.portfolio-button"</span>
       <span class="org-builtin">:position</span><span class="org-string">" relative"</span>
       <span class="org-builtin">:top</span><span class="org-string">" auto"</span>
       <span class="org-builtin">:left</span><span class="org-string">" auto"</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">".portfolio-container"</span>
       <span class="org-builtin">:flex-direction</span><span class="org-string">" column"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">generate-global-css</span> <span class="org-rainbow-delimiters-depth-2">(</span>output-location<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Generate global.css file for site-wide use"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>css:compile-css
   output-location
   '<span class="org-rainbow-delimiters-depth-3">(</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">Navbar CSS</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".header-fixed "</span>
      <span class="org-builtin">:position</span><span class="org-string">" relative"</span>
      <span class="org-builtin">:left</span><span class="org-string">" 0"</span>
      <span class="org-builtin">:top</span><span class="org-string">" 0"</span>
      <span class="org-builtin">:z-index</span><span class="org-string">" 1"</span>
      <span class="org-builtin">:width</span><span class="org-string">" 100%"</span>
      <span class="org-builtin">:margin</span><span class="org-string">" 0"</span>
      <span class="org-builtin">:background-color</span><span class="org-string">" #FDF6E3"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".navbar "</span>
      <span class="org-builtin">:display</span><span class="org-string">" flex"</span>
      <span class="org-builtin">:justify-content</span><span class="org-string">" space-between"</span>
      <span class="org-builtin">:align-items</span><span class="org-string">" center"</span>
      <span class="org-builtin">:color</span><span class="org-string">" #fff"</span>
      <span class="org-builtin">:line-height</span><span class="org-string">" 60px"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".navbar .logo "</span>
      <span class="org-builtin">:flex</span><span class="org-string">" 3"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".navbar .logo a "</span>
      <span class="org-builtin">:display</span><span class="org-string">" block"</span>
      <span class="org-builtin">:margin-left</span><span class="org-string">" 10%"</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 22px"</span>
      <span class="org-builtin">:font-family</span><span class="org-string">" 'Cinzel'"</span>
      <span class="org-builtin">:font-weight</span><span class="org-string">" 500"</span>
      <span class="org-builtin">:color</span><span class="org-string">" #000"</span>
      <span class="org-builtin">:text-decoration</span><span class="org-string">" none"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".navbar .logo a:hover "</span>
      <span class="org-builtin">:color</span><span class="org-string">" #777777"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".navbar nav "</span>
      <span class="org-builtin">:flex</span><span class="org-string">" 8"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".navbar label "</span>
      <span class="org-builtin">:user-select</span><span class="org-string">" none"</span>
      <span class="org-builtin">:cursor</span><span class="org-string">" pointer"</span>
      <span class="org-builtin">:padding</span><span class="org-string">" 28px 20px"</span>
      <span class="org-builtin">:position</span><span class="org-string">" relative"</span>
      <span class="org-builtin">:z-index</span><span class="org-string">" 3"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".navbar label i "</span>
      <span class="org-builtin">:height</span><span class="org-string">" 2px"</span>
      <span class="org-builtin">:position</span><span class="org-string">" relative"</span>
      <span class="org-builtin">:transition</span><span class="org-string">" background .2s ease-out"</span>
      <span class="org-builtin">:width</span><span class="org-string">" 18px"</span>
      <span class="org-builtin">:font-style</span><span class="org-string">" normal"</span>
      <span class="org-builtin">:font-weight</span><span class="org-string">" normal"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".navbar label i:before, .navbar label i:after "</span>
      <span class="org-builtin">:content</span><span class="org-string">" ''"</span>
      <span class="org-builtin">:height</span><span class="org-string">" 100%"</span>
      <span class="org-builtin">:position</span><span class="org-string">" absolute"</span>
      <span class="org-builtin">:transition</span><span class="org-string">" all .2s ease-out"</span>
      <span class="org-builtin">:width</span><span class="org-string">" 100%"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".navbar label i, .navbar label i:before, .navbar label i:after "</span>
      <span class="org-builtin">:display</span><span class="org-string">" block"</span>
      <span class="org-builtin">:background</span><span class="org-string">" black"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".navbar label i:before "</span>
      <span class="org-builtin">:top</span><span class="org-string">" 5px"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".navbar label i:after "</span>
      <span class="org-builtin">:top</span><span class="org-string">" -5px"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".navbar #navbar-toggle "</span>
      <span class="org-builtin">:display</span><span class="org-string">" none"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".header #navbar-toggle:checked ~~ .menu "</span>
      <span class="org-builtin">:visibility</span><span class="org-string">" visible"</span>
      <span class="org-builtin">:opacity</span><span class="org-string">" 0.99"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".header #navbar-toggle:checked ~~ label "</span>
      <span class="org-builtin">:background</span><span class="org-string">" gray"</span>
      <span class="org-builtin">:border-radius</span><span class="org-string">" 50%"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".header #navbar-toggle:checked ~~ label i "</span>
      <span class="org-builtin">:background</span><span class="org-string">" transparent"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".header #navbar-toggle:checked ~~ label i:before "</span>
      <span class="org-builtin">:transform</span><span class="org-string">" rotate(-45deg)"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".header #navbar-toggle:checked ~~ label i:after "</span>
      <span class="org-builtin">:transform</span><span class="org-string">" rotate(45deg)"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".header #navbar-toggle:checked ~~ label:not(.steps) i:before, .header #navbar-toggle:checked ~~ label:not(.steps) i:after "</span>
      <span class="org-builtin">:top</span><span class="org-string">" 0"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"@media (max-width: 768px) "</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">".navbar nav "</span>
       <span class="org-builtin">:visibility</span><span class="org-string">" hidden"</span>
       <span class="org-builtin">:opacity</span><span class="org-string">" 0"</span>
       <span class="org-builtin">:z-index</span><span class="org-string">" 2"</span>
       <span class="org-builtin">:position</span><span class="org-string">" fixed"</span>
       <span class="org-builtin">:top</span><span class="org-string">" 0px"</span>
       <span class="org-builtin">:left</span><span class="org-string">" 0px"</span>
       <span class="org-builtin">:width</span><span class="org-string">" 100%"</span>
       <span class="org-builtin">:height</span><span class="org-string">" 100%"</span>
       <span class="org-builtin">:transition</span><span class="org-string">" all 0.3s ease-out"</span>
       <span class="org-builtin">:display</span><span class="org-string">" table"</span>
       <span class="org-builtin">:background</span><span class="org-string">" #f5deb3"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">".navbar nav ul "</span>
       <span class="org-builtin">:margin</span><span class="org-string">" 0"</span>
       <span class="org-builtin">:padding</span><span class="org-string">" 20px 0"</span>
       <span class="org-builtin">:display</span><span class="org-string">" table-cell"</span>
       <span class="org-builtin">:vertical-align</span><span class="org-string">" middle"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">".navbar nav li "</span>
       <span class="org-builtin">:display</span><span class="org-string">" block"</span>
       <span class="org-builtin">:text-align</span><span class="org-string">" center"</span>
       <span class="org-builtin">:padding</span><span class="org-string">" 20px 0"</span>
       <span class="org-builtin">:text-align</span><span class="org-string">" center"</span>
       <span class="org-builtin">:font-size</span><span class="org-string">" 50px"</span>
       <span class="org-builtin">:min-height</span><span class="org-string">" 50px"</span>
       <span class="org-builtin">:font-weight</span><span class="org-string">" bold"</span>
       <span class="org-builtin">:cursor</span><span class="org-string">" pointer"</span>
       <span class="org-builtin">:transition</span><span class="org-string">" all 0.3s ease-out"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">".navbar nav li:hover "</span>
       <span class="org-builtin">:background</span><span class="org-string">" #FDF6E3"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">".navbar nav li:hover a "</span>
       <span class="org-builtin">:color</span><span class="org-string">" brown"</span>
       <span class="org-builtin">:transition</span><span class="org-string">" all 0.3s ease-out"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">".navbar nav li a "</span>
       <span class="org-builtin">:font-family</span><span class="org-string">" 'Cinzel', 'Times New Roman', serif"</span>
       <span class="org-builtin">:color</span><span class="org-string">" #212121"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"@media (min-width: 768px) "</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">".navbar nav ul "</span>
       <span class="org-builtin">:margin</span><span class="org-string">" 0"</span>
       <span class="org-builtin">:padding</span><span class="org-string">" 0"</span>
       <span class="org-builtin">:display</span><span class="org-string">" flex"</span>
       <span class="org-builtin">:justify-content</span><span class="org-string">" space-around"</span>
       <span class="org-builtin">:text-align</span><span class="org-string">" center"</span>
       <span class="org-builtin">:list-style</span><span class="org-string">" none"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">".navbar nav li "</span>
       <span class="org-builtin">:flex</span><span class="org-string">" 1"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">".navbar nav li a "</span>
       <span class="org-builtin">:display</span><span class="org-string">" block"</span>
       <span class="org-builtin">:padding</span><span class="org-string">" 0 8px"</span>
       <span class="org-builtin">:font-size</span><span class="org-string">" 16px"</span>
       <span class="org-builtin">:font-weight</span><span class="org-string">" 400"</span>
       <span class="org-builtin">:font-family</span><span class="org-string">" 'Cinzel'"</span>
       <span class="org-builtin">:line-height</span><span class="org-string">" 60px"</span>
       <span class="org-builtin">:color</span><span class="org-string">" #000"</span>
       <span class="org-builtin">:text-decoration</span><span class="org-string">" none"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">".navbar nav li.active "</span>
       <span class="org-builtin">:background</span><span class="org-string">" #555"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">".navbar nav li:hover "</span>
       <span class="org-builtin">:background</span><span class="org-string">" #EEE8D5"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">".navbar label "</span>
       <span class="org-builtin">:display</span><span class="org-string">" none"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">End of Navbar CSS</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"html"</span>
      <span class="org-builtin">:background-color</span><span class="org-string">" #FDF6E3"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"body "</span>
      <span class="org-builtin">:width</span><span class="org-string">" 95%"</span>
      <span class="org-builtin">:margin</span><span class="org-string">" 2% auto"</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 14px"</span>
      <span class="org-builtin">:line-height</span><span class="org-string">" 1.4em"</span>
      <span class="org-builtin">:font-family</span><span class="org-string">" 'EB Garamond', 'Times New Roman', serif"</span>
      <span class="org-builtin">:font-weight</span><span class="org-string">" 400"</span>
      <span class="org-builtin">:color</span><span class="org-string">" #333"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"@media screen and (min-width: 600px) "</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"body "</span>
       <span class="org-builtin">:font-size</span><span class="org-string">" 18px"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"@media screen and (min-width: 910px) "</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"body "</span>
       <span class="org-builtin">:width</span><span class="org-string">" 900px"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"#content "</span>
      <span class="org-builtin">:width</span><span class="org-string">" 100%"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"::selection "</span>
      <span class="org-builtin">:background</span><span class="org-string">" #D6EDFF"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"p "</span>
      <span class="org-builtin">:line-height</span> <span class="org-string">"2em"</span>
      <span class="org-builtin">:margin</span><span class="org-string">" 1em auto"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"ol,ul "</span>
      <span class="org-builtin">:margin</span><span class="org-string">" 0 auto"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"dl "</span>
      <span class="org-builtin">:margin</span><span class="org-string">" 0 auto"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".title "</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" center"</span>
      <span class="org-builtin">:margin</span><span class="org-string">" 0.8em auto"</span>
      <span class="org-builtin">:color</span><span class="org-string">" black"</span>
      <span class="org-builtin">:font-family</span><span class="org-string">"'Cinzel'"</span>
      <span class="org-builtin">:font-weight</span><span class="org-string">" 500"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".subtitle "</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" center"</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 1.5em"</span>
      <span class="org-builtin">:line-height</span><span class="org-string">" 1.4"</span>
      <span class="org-builtin">:font-weight</span><span class="org-string">" bold"</span>
      <span class="org-builtin">:margin</span><span class="org-string">" 1em auto"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".updated "</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" center"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".abstract "</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" center"</span>
      <span class="org-builtin">:margin</span><span class="org-string">" auto"</span>
      <span class="org-builtin">:width</span><span class="org-string">" 80%"</span>
      <span class="org-builtin">:font-style</span><span class="org-string">" italic"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".abstract p:last-of-type:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" \"    \""</span>
      <span class="org-builtin">:white-space</span><span class="org-string">" pre"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".status "</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 90%"</span>
      <span class="org-builtin">:margin</span><span class="org-string">" 2em auto"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"[class^=\"section-number-\"] "</span>
      <span class="org-builtin">:margin-right</span><span class="org-string">" .5em"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"[id^=\"orgheadline\"] "</span>
      <span class="org-builtin">:clear</span><span class="org-string">" both"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"#footnotes "</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 90%"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".footpara "</span>
      <span class="org-builtin">:display</span><span class="org-string">" inline"</span>
      <span class="org-builtin">:margin</span><span class="org-string">" .2em auto"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".footdef "</span>
      <span class="org-builtin">:margin-bottom</span><span class="org-string">" 1em"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".footdef sup "</span>
      <span class="org-builtin">:padding-right</span><span class="org-string">" .5em"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"a "</span>
      <span class="org-builtin">:color</span><span class="org-string">" #609cdb"</span>
      <span class="org-builtin">:text-decoration</span><span class="org-string">" none"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"a:hover "</span>
      <span class="org-builtin">:color</span><span class="org-string">" #003355"</span>
      <span class="org-builtin">:border-bottom</span><span class="org-string">" 1px dotted"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"figure "</span>
      <span class="org-builtin">:padding</span><span class="org-string">" 0px"</span>
      <span class="org-builtin">:margin</span><span class="org-string">" 1em auto"</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" center"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"img "</span>
      <span class="org-builtin">:max-width</span><span class="org-string">" 100%"</span>
      <span class="org-builtin">:vertical-align</span><span class="org-string">" middle"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".MathJax_Display "</span>
      <span class="org-builtin">:margin</span><span class="org-string">" 0!important"</span>
      <span class="org-builtin">:width</span><span class="org-string">" 90%!important"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"h1,h2,h3,h4,h5,h6 "</span>
      <span class="org-builtin">:color</span><span class="org-string">" #A5573E"</span>
      <span class="org-builtin">:line-height</span><span class="org-string">" 1em"</span>
      <span class="org-builtin">:font-weight</span><span class="org-string">" 400"</span>
      <span class="org-builtin">:font-family</span><span class="org-string">" 'Montserrat', 'Arial', non-serif"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"h2 a "</span>
      <span class="org-builtin">:color</span><span class="org-string">" #A5573E"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"h3 a "</span>
      <span class="org-builtin">:color</span><span class="org-string">" #A5573E"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"h4 a "</span>
      <span class="org-builtin">:color</span><span class="org-string">" #A5573E"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"h5 a "</span>
      <span class="org-builtin">:color</span><span class="org-string">" #A5573E"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"h6 a "</span>
      <span class="org-builtin">:color</span><span class="org-string">" #A5573E"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"h1,h2,h3 "</span>
      <span class="org-builtin">:line-height</span><span class="org-string">" 1.4em"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"h4,h5,h6 "</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 1em"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"@media screen and (min-width: 600px) "</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"h1 "</span>
       <span class="org-builtin">:font-size</span><span class="org-string">" 2em"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"h2 "</span>
       <span class="org-builtin">:font-size</span><span class="org-string">" 1.5em"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"h3 "</span>
       <span class="org-builtin">:font-size</span><span class="org-string">" 1.3em"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"h1,h2,h3 "</span>
       <span class="org-builtin">:line-height</span><span class="org-string">" 1.4em"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"h4,h5,h6 "</span>
       <span class="org-builtin">:font-size</span><span class="org-string">" 1.1em"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"dt "</span>
      <span class="org-builtin">:font-weight</span><span class="org-string">" bold"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"table "</span>
      <span class="org-builtin">:margin</span><span class="org-string">" 1em auto"</span>
      <span class="org-builtin">:border-top</span><span class="org-string">" 2px solid"</span>
      <span class="org-builtin">:border-bottom</span><span class="org-string">" 2px solid"</span>
      <span class="org-builtin">:border-collapse</span><span class="org-string">" collapse"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"thead "</span>
      <span class="org-builtin">:border-bottom</span><span class="org-string">" 2px solid"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"table td + td, table th + th "</span>
      <span class="org-builtin">:border-left</span><span class="org-string">" 1px solid gray"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"table tr "</span>
      <span class="org-builtin">:border-top</span><span class="org-string">" 1px solid lightgray"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"td,th "</span>
      <span class="org-builtin">:padding</span><span class="org-string">" 0.3em 0.6em"</span>
      <span class="org-builtin">:vertical-align</span><span class="org-string">" middle"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"caption.t-above "</span>
      <span class="org-builtin">:caption-side</span><span class="org-string">" top"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"caption.t-bottom "</span>
      <span class="org-builtin">:caption-side</span><span class="org-string">" bottom"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"caption "</span>
      <span class="org-builtin">:margin-bottom</span><span class="org-string">" 0.3em"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"figcaption "</span>
      <span class="org-builtin">:margin-top</span><span class="org-string">" 0.3em"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"th.org-right "</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" center"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"th.org-left "</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" center"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"th.org-center "</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" center"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"td.org-right "</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" right"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"td.org-left "</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" left"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"td.org-center "</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" center"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"blockquote "</span>
      <span class="org-builtin">:margin</span><span class="org-string">" 1em 2em"</span>
      <span class="org-builtin">:padding-left</span><span class="org-string">" 1em"</span>
      <span class="org-builtin">:border-left</span><span class="org-string">" 3px solid #ccc"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"kbd "</span>
      <span class="org-builtin">:background-color</span><span class="org-string">" #f7f7f7"</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 80%"</span>
      <span class="org-builtin">:margin</span><span class="org-string">" 0 .1em"</span>
      <span class="org-builtin">:padding</span><span class="org-string">" .1em .6em"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".todo "</span>
      <span class="org-builtin">:background-color</span><span class="org-string">" red"</span>
      <span class="org-builtin">:color</span><span class="org-string">" white"</span>
      <span class="org-builtin">:padding</span><span class="org-string">" .1em 0.3em"</span>
      <span class="org-builtin">:border-radius</span><span class="org-string">" 3px"</span>
      <span class="org-builtin">:background-clip</span><span class="org-string">" padding-box"</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 80%"</span>
      <span class="org-builtin">:font-family</span><span class="org-string">" 'Courier New', monospace"</span>
      <span class="org-builtin">:line-height</span><span class="org-string">" 1"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".done "</span>
      <span class="org-builtin">:background-color</span><span class="org-string">" green"</span>
      <span class="org-builtin">:color</span><span class="org-string">" white"</span>
      <span class="org-builtin">:padding</span><span class="org-string">" .1em 0.3em"</span>
      <span class="org-builtin">:border-radius</span><span class="org-string">" 3px"</span>
      <span class="org-builtin">:background-clip</span><span class="org-string">" padding-box"</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 80%"</span>
      <span class="org-builtin">:font-family</span><span class="org-string">" 'Courier New', monospace"</span>
      <span class="org-builtin">:line-height</span><span class="org-string">" 1"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".priority "</span>
      <span class="org-builtin">:color</span><span class="org-string">" orange"</span>
      <span class="org-builtin">:font-family</span><span class="org-string">" 'Courier New', monospace"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-comment-delimiter">;; </span><span class="org-comment">/* Because tag span is set to float.  This is more like a hacking.  Maybe we need a cleaner solution. */</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"#table-of-contents li "</span>
      <span class="org-builtin">:clear</span><span class="org-string">" both"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".tag "</span>
      <span class="org-builtin">:font-family</span><span class="org-string">" 'Courier New', monospace"</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 0.7em"</span>
      <span class="org-builtin">:font-weight</span><span class="org-string">" normal"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".tag span "</span>
      <span class="org-builtin">:padding</span><span class="org-string">" 0.3em 0.3em"</span>
      <span class="org-builtin">:float</span><span class="org-string">" right"</span>
      <span class="org-builtin">:margin-right</span><span class="org-string">" .5em"</span>
      <span class="org-builtin">:border</span><span class="org-string">" 1px solid #bbb"</span>
      <span class="org-builtin">:border-radius</span><span class="org-string">" 3px"</span>
      <span class="org-builtin">:background-clip</span><span class="org-string">" padding-box"</span>
      <span class="org-builtin">:color</span><span class="org-string">" #333"</span>
      <span class="org-builtin">:background-color</span><span class="org-string">" #eee"</span>
      <span class="org-builtin">:line-height</span><span class="org-string">" 1"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".timestamp "</span>
      <span class="org-builtin">:color</span><span class="org-string">" #333"</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 90%"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".timestamp-kwd "</span>
      <span class="org-builtin">:color</span><span class="org-string">" #5f9ea0"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-right "</span>
      <span class="org-builtin">:margin-left</span><span class="org-string">" auto"</span>
      <span class="org-builtin">:margin-right</span><span class="org-string">" 0px"</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" right"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-left "</span>
      <span class="org-builtin">:margin-left</span><span class="org-string">" 0px"</span>
      <span class="org-builtin">:margin-right</span><span class="org-string">" auto"</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" left"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-center "</span>
      <span class="org-builtin">:margin-left</span><span class="org-string">" auto"</span>
      <span class="org-builtin">:margin-right</span><span class="org-string">" auto"</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" center"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".underline "</span>
      <span class="org-builtin">:text-decoration</span><span class="org-string">" underline"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"#postamble p, #preamble p "</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 90%"</span>
      <span class="org-builtin">:margin</span><span class="org-string">" .2em"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".copyright-container "</span>
      <span class="org-builtin">:display</span><span class="org-string">" flex"</span>
      <span class="org-builtin">:justify-content</span><span class="org-string">" space-between"</span>
      <span class="org-builtin">:align-items</span><span class="org-string">" center"</span>
      <span class="org-builtin">:flex-wrap</span><span class="org-string">" wrap"</span>
      <span class="org-builtin">:padding</span><span class="org-string">" 0.4ex 1em"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".generated "</span>
      <span class="org-builtin">:font-family</span><span class="org-string">" 'Courier New', monospace"</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" center"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"p.verse "</span>
      <span class="org-builtin">:margin-left</span><span class="org-string">" 3%"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">":not(pre) &gt; code "</span>
      <span class="org-builtin">:padding</span><span class="org-string">" 2px 5px"</span>
      <span class="org-builtin">:margin</span><span class="org-string">" auto 1px"</span>
      <span class="org-builtin">:border</span><span class="org-string">" 1px solid #DDD"</span>
      <span class="org-builtin">:border-radius</span><span class="org-string">" 3px"</span>
      <span class="org-builtin">:background-clip</span><span class="org-string">" padding-box"</span>
      <span class="org-builtin">:background-color</span> <span class="org-string">"#F5F5F5"</span>
      <span class="org-builtin">:color</span><span class="org-string">" #333"</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 80%"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container "</span>
      <span class="org-builtin">:border</span><span class="org-string">" 1px solid #ccc"</span>
      <span class="org-builtin">:box-shadow</span><span class="org-string">" 3px 3px 3px #eee"</span>
      <span class="org-builtin">:background-color</span> <span class="org-string">"#F5E8C4"</span>
      <span class="org-builtin">:font-family</span><span class="org-string">" 'Courier New', monospace"</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 80%"</span>
      <span class="org-builtin">:margin</span><span class="org-string">" 1em auto"</span>
      <span class="org-builtin">:padding</span><span class="org-string">" 0.1em 0.5em"</span>
      <span class="org-builtin">:position</span><span class="org-string">" relative"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre "</span>
      <span class="org-builtin">:overflow</span><span class="org-string">" auto"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre:before "</span>
      <span class="org-builtin">:display</span><span class="org-string">" block"</span>
      <span class="org-builtin">:position</span><span class="org-string">" absolute"</span>
      <span class="org-builtin">:background-color</span><span class="org-string">" #b3b3b3"</span>
      <span class="org-builtin">:top</span><span class="org-string">" 0"</span>
      <span class="org-builtin">:right</span><span class="org-string">" 0"</span>
      <span class="org-builtin">:padding</span><span class="org-string">" 0 0.5em"</span>
      <span class="org-builtin">:border-bottom-left-radius</span><span class="org-string">" 8px"</span>
      <span class="org-builtin">:border</span><span class="org-string">" 0"</span>
      <span class="org-builtin">:color</span><span class="org-string">" white"</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 80%"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-comment-delimiter">;; </span><span class="org-comment">/* from http://demo.thi.ng/org-spec/ */</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-sh:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'sh'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-bash:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'bash'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-emacs-lisp:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Emacs Lisp'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-R:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'R'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-org:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Org'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-cpp:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'C++'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-c:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'C'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-html:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'HTML'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-js:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Javascript'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-javascript:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Javascript'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-comment-delimiter">;; </span><span class="org-comment">// More languages from http://orgmode.org/worg/org-contrib/babel/languages.html</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-abc:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'ABC'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-asymptote:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Asymptote'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-awk:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Awk'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-C:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'C'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-calc:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Calc'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-clojure:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Clojure'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-comint:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'comint'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-css:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'CSS'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-D:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'D'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-ditaa:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Ditaa'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-dot:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Dot'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-ebnf:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'ebnf'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-forth:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Forth'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-F90:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Fortran'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-gnuplot:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Gnuplot'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-haskell:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Haskell'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-io:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Io'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-java:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Java'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-latex:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'LaTeX'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-ledger:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Ledger'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-ly:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Lilypond'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-lisp:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Lisp'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-makefile:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Make'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-matlab:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Matlab'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-max:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Maxima'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-mscgen:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Mscgen'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-Caml:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Objective'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-octave:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Octave'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-org:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Org'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-perl:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Perl'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-picolisp:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Picolisp'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-plantuml:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'PlantUML'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-python:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Python'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-ruby:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Ruby'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-sass:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Sass'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-scala:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Scala'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-scheme:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Scheme'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-screen:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Screen'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-sed:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Sed'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-shell:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'shell'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-shen:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Shen'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-sql:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'SQL'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-sqlite:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'SQLite'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-stan:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Stan'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-vala:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Vala'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-axiom:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Axiom'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-browser:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'HTML'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-cypher:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Neo4j'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-elixir:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Elixir'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-request:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'http'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-ipython:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'iPython'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-kotlin:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Kotlin'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-Flavored Erlang  lfe:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Lisp'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-mongo:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'MongoDB'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-prolog:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Prolog'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-rec:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'rec'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-ML  sml:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Standard'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-Translate  translate:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Google'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-typescript:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Typescript'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".org-src-container&gt;pre.src-rust:before "</span>
      <span class="org-builtin">:content</span><span class="org-string">" 'Rust'"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".inlinetask "</span>
      <span class="org-builtin">:background</span><span class="org-string">" #ffffcc"</span>
      <span class="org-builtin">:border</span><span class="org-string">" 2px solid gray"</span>
      <span class="org-builtin">:margin</span><span class="org-string">" 10px"</span>
      <span class="org-builtin">:padding</span><span class="org-string">" 10px"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"#org-div-home-and-up "</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 70%"</span>
      <span class="org-builtin">:text-align</span><span class="org-string">" right"</span>
      <span class="org-builtin">:white-space</span><span class="org-string">" nowrap"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".linenr "</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 90%"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".code-highlighted "</span>
      <span class="org-builtin">:background-color</span><span class="org-string">" #ffff00"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"#bibliography "</span>
      <span class="org-builtin">:font-size</span><span class="org-string">" 90%"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"#bibliography table "</span>
      <span class="org-builtin">:width</span><span class="org-string">" 100%"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".creator "</span>
      <span class="org-builtin">:display</span><span class="org-string">" block"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>

     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"@media screen and (min-width: 600px) "</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">".creator "</span>
       <span class="org-builtin">:display</span><span class="org-string">" inline"</span>
       <span class="org-builtin">:float</span><span class="org-string">" right"</span>
       <span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".cryptedmail:after "</span>
      <span class="org-builtin">:font-family</span><span class="org-string">" 'EB Garamond', 'Times New Roman', serif"</span>
      <span class="org-builtin">:font-size</span><span class="org-string">"1.2 rem"</span>
      <span class="org-builtin">:content</span><span class="org-string">" attr(data-name) \"@\" attr(data-domain) \".\" attr(data-tld)"</span>
      <span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">generate-index-js</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;key</span> <span class="org-rainbow-delimiters-depth-3">(</span>input #P<span class="org-string">"index.lisp"</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>output #P<span class="org-string">"/home/hanshen/project-isidore/assets/index.js"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Generate script.js file for index.html use. For a tutorial see: https://app.leby.org/post/fun-with-parenscript/"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ensure-directories-exist output<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">with-open-file</span> <span class="org-rainbow-delimiters-depth-3">(</span>stream output <span class="org-builtin">:direction</span> <span class="org-builtin">:output</span> <span class="org-builtin">:if-exists</span> <span class="org-builtin">:supersede</span> <span class="org-builtin">:if-does-not-exist</span> <span class="org-builtin">:create</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>format stream <span class="org-rainbow-delimiters-depth-4">(</span>js:ps-compile-file input<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

&#12;
<span class="org-comment-delimiter">;;; </span><span class="org-comment">for development</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">*app-dev*</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">stop-dev-server</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>ws:started-p *app-dev*<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>ws:stop *app-dev*<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">start-dev-server</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>generate-index-css <span class="org-string">"/home/hanshen/project-isidore/assets/index.css"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>generate-global-css <span class="org-string">"/home/hanshen/project-isidore/assets/global.css"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>generate-index-js <span class="org-builtin">:input</span> <span class="org-string">"/home/hanshen/project-isidore/index.lisp"</span> <span class="org-builtin">:output</span> <span class="org-string">"/home/hanshen/project-isidore/assets/index.js"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setf ws:*dispatch-table*
        `<span class="org-rainbow-delimiters-depth-3">(</span>ws:dispatch-easy-handlers
          ,<span class="org-rainbow-delimiters-depth-4">(</span>ws:create-folder-dispatcher-and-handler
            <span class="org-string">"/"</span> <span class="org-string">"/home/hanshen/project-isidore/assets/"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setf *app-dev*
        <span class="org-rainbow-delimiters-depth-3">(</span>ws:start <span class="org-rainbow-delimiters-depth-4">(</span>make-instance 'ws:easy-acceptor <span class="org-builtin">:port</span> <span class="org-highlight-numbers-number">4242</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

</pre>
</div>
</div>
<div id="outline-container-org88d7ef7" class="outline-3">
<h3 id="Index-lisp"><span class="section-number-3">5.1</span> Index.lisp</h3>
<div class="outline-text-3" id="text-Index-lisp">
<p>
This file exists to be used in the function <b>generate index JS.</b> In the
future I would like to find a way to in-line this JavaScript into the
generate index JS function itself. As for the JavaScript itself, the purpose
is to emulate a typewriter effect on the index homepage. Hence the name index.lisp.
</p>
<div class="org-src-container">
<pre class="src src-lisp" id="org262a1f3"><span class="org-rainbow-delimiters-depth-1">(</span>ps:chain ps-dom2-symbols:document
       <span class="org-rainbow-delimiters-depth-2">(</span>ps-dom2-symbols:add-event-listener <span class="org-string">"DOMContentLoaded"</span>
                                           <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">(</span>event<span class="org-rainbow-delimiters-depth-4">)</span>
                                             <span class="org-rainbow-delimiters-depth-4">(</span>ps:var data-text <span class="org-rainbow-delimiters-depth-5">(</span>ps:array <span class="org-string">"Hey there,"</span> <span class="org-string">"Bonjour."</span> <span class="org-string">"&#161;Hola!"</span> <span class="org-string">"&#1055;&#1088;&#1080;&#1074;&#1077;&#1090;."</span> <span class="org-string">"Hello!"</span> <span class="org-string">"Guten Tag."</span> <span class="org-string">"Good Day,"</span> <span class="org-string">"Welcome!"</span> <span class="org-string">"Konnichiwa,"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                             <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">defun</span> <span class="org-function-name">type-writer</span><span class="org-rainbow-delimiters-depth-5">(</span>text i fn-callback<span class="org-rainbow-delimiters-depth-5">)</span>
                                               <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">cond</span> <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">(</span>&lt; i <span class="org-rainbow-delimiters-depth-8">(</span>length text<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                                                      <span class="org-rainbow-delimiters-depth-7">(</span>setf <span class="org-rainbow-delimiters-depth-8">(</span>ps:chain ps-dom2-symbols:document<span class="org-rainbow-delimiters-depth-9">(</span>query-selector <span class="org-string">"h1"</span><span class="org-rainbow-delimiters-depth-9">)</span>ps-dom-nonstandard-symbols:inner-h-t-m-l<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>+<span class="org-rainbow-delimiters-depth-9">(</span>ps:chain text <span class="org-rainbow-delimiters-depth-1">(</span>substring <span class="org-highlight-numbers-number">0</span> <span class="org-rainbow-delimiters-depth-2">(</span>+ i <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span> <span class="org-string">"&lt;span aria-hidden=\"true\"&gt;&lt;/span&gt;"</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                                                      <span class="org-rainbow-delimiters-depth-7">(</span>ps-window-wd-symbols:set-timeout <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-9">()</span> <span class="org-rainbow-delimiters-depth-9">(</span>type-writer text <span class="org-rainbow-delimiters-depth-1">(</span>+ i <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-1">)</span> fn-callback<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-highlight-numbers-number">100</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                                                     <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">(</span>equal <span class="org-rainbow-delimiters-depth-8">(</span>ps:typeof fn-callback<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-string">"function"</span><span class="org-rainbow-delimiters-depth-7">)</span>
                                                      <span class="org-rainbow-delimiters-depth-7">(</span>ps-window-wd-symbols:set-timeout fn-callback <span class="org-highlight-numbers-number">700</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                             <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">defun</span> <span class="org-function-name">start-text-animation</span> <span class="org-rainbow-delimiters-depth-5">(</span>i<span class="org-rainbow-delimiters-depth-5">)</span>
                                               <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-6">(</span>equal <span class="org-rainbow-delimiters-depth-7">(</span>ps:typeof <span class="org-rainbow-delimiters-depth-8">(</span>aref data-text i<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"undefined"</span><span class="org-rainbow-delimiters-depth-6">)</span>
                                                 <span class="org-rainbow-delimiters-depth-6">(</span>ps-window-wd-symbols:set-timeout <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-8">()</span> <span class="org-rainbow-delimiters-depth-8">(</span>start-text-animation <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-highlight-numbers-number">2000</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
                                               <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-6">(</span>&lt; i <span class="org-rainbow-delimiters-depth-7">(</span>length <span class="org-rainbow-delimiters-depth-8">(</span>aref data-text i<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                                                 <span class="org-rainbow-delimiters-depth-6">(</span>type-writer <span class="org-rainbow-delimiters-depth-7">(</span>aref data-text i<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-highlight-numbers-number">0</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-8">()</span> <span class="org-rainbow-delimiters-depth-8">(</span>start-text-animation <span class="org-rainbow-delimiters-depth-9">(</span>+ i <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                             <span class="org-rainbow-delimiters-depth-4">(</span>start-text-animation <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org8dff084" class="outline-2">
<h2 id="Builds-Deployment"><span class="section-number-2">6</span> Builds and Deployment</h2>
<div class="outline-text-2" id="text-Builds-Deployment">
<p>
Github and Heroku make for an appropriate abstraction for the level we're
working at. It simplifies the process of moving development code to production code
to
</p>

<div class="org-src-container">
<pre class="src src-bash">git push origin/master
</pre>
</div>

<p>
For the uninitiated, in order to further enhance developer experience in Emacs,
an excellent git porcelain (with spacemacs layer integration) is <a href="https://magit.vc">Magit.</a> This,
paired with [<a href="#chaconProGit2014">1</a>], takes care of your version control needs.
</p>

<p>
All pushes to master branch that pass <a href="#orgf9103fa">Continuous Integration</a> are automatically
built and deployed by Heroku. This can be setup by through the <code>deploy</code> tab
under the project menu on the Heroku website.
</p>

<ol class="org-ol">
<li><p>
Initial Setup
</p>

<p>
Make sure the project is on git version control. Install Heroku CLI. Common
Lisp is not one of Heroku's supported languages, so you will have to use the
custom buildpack in the /bin folder. Since the buildpack is short and
simplified, <a href="#Heroku-Buildpack-Exposition">I highly encourage you to roll your own.</a>
</p>

<div class="org-src-container">
<pre class="src src-bash"><span class="org-builtin">cd</span> project-isidore
<span class="org-comment-delimiter"># </span><span class="org-comment">See the section below for an exposition of the heroku buildpack</span>
heroku create --buildpack https://github.com/HanshenWang/project-isidore
<span class="org-comment-delimiter"># </span><span class="org-comment">Change ENV variable to use SBCL instead of the default CCL</span>
heroku config:set <span class="org-variable-name">CL_IMPL</span>=sbcl-bin
<span class="org-comment-delimiter"># </span><span class="org-comment">Push to production with</span>
git push heroku master
</pre>
</div>

<p>
You can visit your application at the provided project-name.herokuapp.com
address. To add a custom domain, see the <a href="https://devcenter.heroku.com/articles/custom-domains">Heroku documentation on custom
domain names for apps.</a> Said documentation also links to a Cloudflare document
on enabling SSL for your website.
</p>

<p>
This website can be visited at:
</p>

<ul class="org-ul">
<li>hanshenwang.com</li>
<li>project-isidore.herokuapp.com
<ul class="org-ul">
<li>Fallback URL in case I fail to renew my registration of hanshenwang.com</li>
</ul></li>
</ul>

<p>
Heroku free tier limitation means free dynos can go to sleep after a period
of inactivity . This means visitors to our application will experience
significant delay. To avoid this, upgrade to a hobby tier dyno or use
<a href="https://uptimerobot.com">https://uptimerobot.com</a> to ping your server every 5 minutes.
</p></li>

<li><p>
Benchmarking
</p>

<p>
We use loader.io to benchmark our website. 250 clients per second over a
period of 1 minute. Benchmarked with commit 124e59d.
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Response Time</th>
<th scope="col" class="org-left">Milliseconds</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Average</td>
<td class="org-left">42</td>
</tr>

<tr>
<td class="org-left">Min/Max</td>
<td class="org-left">17/1038</td>
</tr>
</tbody>
</table>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bandwidth</th>
<th scope="col" class="org-right">Megabytes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Sent</td>
<td class="org-right">2.33</td>
</tr>

<tr>
<td class="org-left">Received</td>
<td class="org-right">15.47</td>
</tr>
</tbody>
</table>

<p>
<a href="https://medium.com/@_oleksii_/how-to-benchmark-http-latency-with-wrk-a-z-guide-e5b185bd4cdc">https://medium.com/@_oleksii_/how-to-benchmark-http-latency-with-wrk-a-z-guide-e5b185bd4cdc</a>
</p>

<p>
In the future we can try apache bench.
</p>
<div class="org-src-container">
<pre class="src src-bash">sudo apt install apache2-utils
</pre>
</div></li>
</ol>
</div>

<div id="outline-container-orgc44da15" class="outline-3">
<h3 id="Heroku-Buildpack-Exposition"><span class="section-number-3">6.1</span> Heroku Buildpack Exposition</h3>
<div class="outline-text-3" id="text-Heroku-Buildpack-Exposition">
<p>
Heroku is a platform-as-a-service. In our production server we are provided with
a clean operating system image, namely Ubuntu 20.04 LTS at the time of writing.
</p>

<p>
Because Common Lisp does not come with a pre-built buildpack from Heroku, we
will have to use their own custom build pack.
</p>

<p>
Setting up your own custom built pack is as simple as three
separate shell scripts and one compile.lisp file. The <a href="https://devcenter.heroku.com/articles/buildpack-api">build pack API</a> explains
each of these shell scripts in greater depth.
</p>

<p>
They are run in the following order:
</p>
<ol class="org-ol">
<li>Detect - this script determines if the buildpack is valid</li>
<li>Compile - transform project from human readable source code to machine code</li>
<li>Release - start application</li>
</ol>

<p>
Why is this worth learning? Suppose you would like to use software not included
in the OS package manager. You could include the binaries in your repository,
but a <a href="https://www.petekeen.net/introduction-to-heroku-buildpacks">better solution would be adding them to your custom buildpack.</a>
</p>

<p>
The Heroku build pack that works with SBCL implementation can be found here:
<a href="https://gitlab.com/bendersteed/heroku-buildpack-common-lisp">bendersteed / heroku-buildpack-common-lisp 路 GitLab</a> ] (<a href="https://bendersteed.gitlab.io/post/deploying-common-lisp-to-heroku/">see Author's journal of
the buildpack fork</a>). In case the blog goes down, the following is reiterated.
Relevant caveats include that in order for the buildpack to work, you have to
define the initialize-application symbol in CL-USER package. This is not really
good style, I would pretty much prefer to be able to have the function in my
package (aka run in the REPL, <code>in-package :project-isidore</code>). For now I
workaround this caveat by adding a heroku.lisp file to my system.
</p>
</div>

<div id="outline-container-orgcf13bdb" class="outline-4">
<h4 id="orgcf13bdb"><span class="section-number-4">6.1.1</span> Detect Script</h4>
<div class="outline-text-4" id="text-6-1-1">
<div class="org-src-container">
<pre class="src src-sh" id="org85a468f"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">this pack is valid for apps with a heroku-compile.lisp in the root</span>
<span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span> -f <span class="org-string">"$1/heroku-compile.lisp"</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
  <span class="org-builtin">echo</span> <span class="org-string">"CLFramework"</span>
  <span class="org-keyword">exit</span> <span class="org-highlight-numbers-number">0</span>
<span class="org-keyword">else</span>
  <span class="org-keyword">exit</span> <span class="org-highlight-numbers-number">1</span>
<span class="org-keyword">fi</span>

</pre>
</div>
</div>

<div id="outline-container-org17aa21b" class="outline-5">
<h5 id="org17aa21b">Heroku Compile</h5>
<div class="outline-text-5" id="text-org17aa21b">
<div class="org-src-container">
<pre class="src src-lisp" id="org4ddacbf"><span class="org-rainbow-delimiters-depth-1">(</span>ql:quickload <span class="org-builtin">:project-isidore</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgccb8647" class="outline-4">
<h4 id="orgccb8647"><span class="section-number-4">6.1.2</span> Compile Script</h4>
<div class="outline-text-4" id="text-6-1-2">
<div class="org-src-container">
<pre class="src src-bash" id="orga620a21"><span class="org-comment-delimiter">#</span><span class="org-comment">!/usr/bin/</span><span class="org-keyword">env</span><span class="org-comment"> bash</span>

<span class="org-variable-name">BUILDPACK_VERSION</span>=<span class="org-string">"0.1.0"</span>

<span class="org-keyword">function</span> <span class="org-function-name">getenv</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-variable-name">ENV_NAME</span>=<span class="org-string">"$1"</span>
  <span class="org-variable-name">DEFAULT</span>=<span class="org-string">"$2"</span>
  <span class="org-variable-name">ENV_VAL</span>=<span class="org-string">"$DEFAULT"</span>

  <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> -f <span class="org-string">"$ENV_DIR/$ENV_NAME"</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
    <span class="org-variable-name">ENV_VAL</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">cat</span> <span class="org-string">"$ENV_DIR/$ENV_NAME"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-keyword">fi</span>

  <span class="org-builtin">echo</span> <span class="org-string">"$ENV_VAL"</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">function</span> <span class="org-function-name">info</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-builtin">echo</span> <span class="org-string">"        $1"</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">function</span> <span class="org-function-name">log</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-builtin">echo</span> <span class="org-string">"------&gt; $1"</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">shellcheck disable=SC2164</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">shellcheck disable=SC2046</span>
<span class="org-variable-name">BUILDPACK_DIR</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-sh-quoted-exec">cd</span> $<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">dirname</span> <span class="org-string">"$0"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-builtin">cd</span> ..; <span class="org-builtin">pwd</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter"># </span><span class="org-comment">absolute path of buildpack</span>

<span class="org-variable-name">BUILD_DIR</span>=$<span class="org-highlight-numbers-number">1</span>
<span class="org-variable-name">CACHE_DIR</span>=$<span class="org-highlight-numbers-number">2</span>
<span class="org-variable-name">ENV_DIR</span>=$<span class="org-highlight-numbers-number">3</span>
<span class="org-variable-name">CL_IMPL</span>=<span class="org-string">"$(</span><span class="org-sh-quoted-exec">getenv</span><span class="org-string"> CL_IMPL 'ccl-bin')"</span>

log <span class="org-string">"-----&gt; Common Lisp buildpack $BUILDPACK_VERSION"</span>
info <span class="org-string">"BUILD_DIR: $BUILD_DIR"</span>
info <span class="org-string">"CACHE_DIR: $BUILD_DIR"</span>
info <span class="org-string">"ENV_DIR: $ENV_DIR"</span>
info <span class="org-string">"CL_IMPL: $CL_IMPL"</span>

<span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span> <span class="org-string">"$RESET_CACHE"</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
  log <span class="org-string">"flushing cache"</span>
  rm -rf <span class="org-string">"${CACHEDIR:?}/"</span>*
<span class="org-keyword">fi</span>

git clone -b release https://github.com/roswell/roswell.git
<span class="org-builtin">pushd</span> roswell || <span class="org-keyword">exit</span>
sh bootstrap
./configure --prefix ~/.local/
make
make install
<span class="org-builtin">export</span> <span class="org-variable-name">PATH</span>=$<span class="org-variable-name">PATH</span>:~/.local/bin/
ros setup
ros install <span class="org-string">"$CL_IMPL"</span>
ros use <span class="org-string">"$CL_IMPL"</span>
<span class="org-builtin">popd</span> || <span class="org-keyword">exit</span>

log <span class="org-string">"compiling application"</span>
<span class="org-builtin">export</span> BUILDPACK_DIR
<span class="org-builtin">export</span> CACHE_DIR
<span class="org-builtin">export</span> BUILD_DIR

ros run --asdf --load <span class="org-string">"$BUILDPACK_DIR/bin/compile.lisp"</span> --quit
log <span class="org-string">"compilation complete"</span>

chmod a+x <span class="org-string">"$BUILD_DIR/lispapp"</span>

</pre>
</div>
</div>

<div id="outline-container-org2901d15" class="outline-5">
<h5 id="org2901d15">Compile Lisp</h5>
<div class="outline-text-5" id="text-org2901d15">
<div class="org-src-container">
<pre class="src src-lisp" id="org9c8688a"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">in-package</span> <span class="org-builtin">:cl-user</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> '<span class="org-constant">asdf</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">flet</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>env-to-dirs <span class="org-rainbow-delimiters-depth-4">(</span>x<span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>pathname-directory <span class="org-rainbow-delimiters-depth-5">(</span>pathname <span class="org-rainbow-delimiters-depth-6">(</span>concatenate 'string
                #+sbcl <span class="org-rainbow-delimiters-depth-7">(</span>sb-posix:getenv x<span class="org-rainbow-delimiters-depth-7">)</span>
                #+ccl <span class="org-rainbow-delimiters-depth-7">(</span>getenv x<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">*build-dir*</span> <span class="org-rainbow-delimiters-depth-3">(</span>env-to-dirs <span class="org-string">"BUILD_DIR"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">*cache-dir*</span> <span class="org-rainbow-delimiters-depth-3">(</span>env-to-dirs <span class="org-string">"CACHE_DIR"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">*buildpack-dir*</span> <span class="org-rainbow-delimiters-depth-3">(</span>env-to-dirs <span class="org-string">"BUILDPACK_DIR"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>format t <span class="org-string">"~&amp;  *build-dir* = ~a"</span> <span class="org-rainbow-delimiters-depth-2">(</span>make-pathname <span class="org-builtin">:directory</span> *build-dir*<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>format t <span class="org-string">"~&amp;  *cache-dir* = ~a"</span> <span class="org-rainbow-delimiters-depth-2">(</span>make-pathname <span class="org-builtin">:directory</span> *cache-dir*<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>format t <span class="org-string">"~&amp;  *buildpack-dir* = ~a"</span> <span class="org-rainbow-delimiters-depth-2">(</span>make-pathname <span class="org-builtin">:directory</span> *buildpack-dir*<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;;; </span><span class="org-comment">Tell ASDF to store binaries in the cache dir.</span>
#+ccl <span class="org-rainbow-delimiters-depth-1">(</span>ccl:setenv <span class="org-string">"XDG_CACHE_HOME"</span> <span class="org-rainbow-delimiters-depth-2">(</span>concatenate 'string <span class="org-rainbow-delimiters-depth-3">(</span>getenv <span class="org-string">"CACHE_DIR"</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-string">"/.asdf/"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
#+sbcl <span class="org-rainbow-delimiters-depth-1">(</span>sb-posix:setenv <span class="org-string">"XDG_CACHE_HOME"</span> <span class="org-rainbow-delimiters-depth-2">(</span>concatenate 'string <span class="org-rainbow-delimiters-depth-3">(</span>sb-posix:getenv <span class="org-string">"CACHE_DIR"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                 <span class="org-string">"/.asdf/"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;;; </span><span class="org-comment">Notify ASDF that our build and cache dir is an awesome place to find asf files.</span>
<span class="org-rainbow-delimiters-depth-1">(</span>asdf:initialize-source-registry `<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:source-registry</span>
                                    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:tree</span> ,<span class="org-rainbow-delimiters-depth-4">(</span>make-pathname <span class="org-builtin">:directory</span> *build-dir*<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                                    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:tree</span> ,<span class="org-rainbow-delimiters-depth-4">(</span>make-pathname <span class="org-builtin">:directory</span> *cache-dir*<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                                    <span class="org-builtin">:inherit-configuration</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;;; </span><span class="org-comment">App can redefine this to do runtime initializations</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">initialize-application</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;key</span> port<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">declare</span> <span class="org-rainbow-delimiters-depth-3">(</span>ignore port<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;;; </span><span class="org-comment">Default toplevel, app can redefine.</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">heroku-toplevel</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>initialize-application <span class="org-builtin">:port</span> <span class="org-rainbow-delimiters-depth-3">(</span>parse-integer  #+sbcl <span class="org-rainbow-delimiters-depth-4">(</span>sb-posix:getenv <span class="org-string">"PORT"</span><span class="org-rainbow-delimiters-depth-4">)</span>
            #+ccl <span class="org-rainbow-delimiters-depth-4">(</span>getenv <span class="org-string">"PORT"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">loop</span> <span class="org-rainbow-delimiters-depth-3">(</span>sleep <span class="org-highlight-numbers-number">600</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>     <span class="org-comment">;sleep forever</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">*root*</span> <span class="org-string">"/app"</span><span class="org-rainbow-delimiters-depth-1">)</span>      <span class="org-comment">;this is always the app root on Heroku now?</span>

<span class="org-comment-delimiter">;;; </span><span class="org-comment">Run the app's own build.</span>
<span class="org-rainbow-delimiters-depth-1">(</span>format t <span class="org-string">"~&amp;* Load application's heroku-compile.lisp "</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>load <span class="org-rainbow-delimiters-depth-2">(</span>make-pathname <span class="org-builtin">:directory</span> *build-dir* <span class="org-builtin">:defaults</span> <span class="org-string">"heroku-compile.lisp"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;;; </span><span class="org-comment">Save the application as an image</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>app-file <span class="org-rainbow-delimiters-depth-4">(</span>make-pathname <span class="org-builtin">:directory</span> *build-dir* <span class="org-builtin">:defaults</span> <span class="org-string">"lispapp"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">note that the buildpack's bin/release refers to this application name.</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>format t <span class="org-string">"~&amp;* create slug's ./lispapp via save-application"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  #+ccl <span class="org-rainbow-delimiters-depth-2">(</span>save-application app-file
        <span class="org-builtin">:prepend-kernel</span> t
        <span class="org-builtin">:toplevel-function</span> #'heroku-toplevel<span class="org-rainbow-delimiters-depth-2">)</span>
  #+sbcl <span class="org-rainbow-delimiters-depth-2">(</span>save-lisp-and-die app-file
          <span class="org-builtin">:toplevel</span> #'heroku-toplevel
          <span class="org-builtin">:executable</span> t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

</pre>
</div>
</div>

<div id="outline-container-orgdefa3a2" class="outline-6">
<h6 id="Heroku">Heroku</h6>
<div class="outline-text-6" id="text-Heroku">
<p>
This redefines initialize-application
</p>
<div class="org-src-container">
<pre class="src src-lisp" id="org9edeaf3"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">in-package</span> <span class="org-comment-delimiter">#:</span><span class="org-doc">cl-user</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;;; </span><span class="org-comment">application entry point</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">*acceptor*</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Takes a PORT parameter as Heroku assigns a different PORT per environment</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">initialize-application</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;key</span> port<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>project-isidore:generate-index-css <span class="org-string">"/app/assets/index.css"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>project-isidore:generate-global-css <span class="org-string">"/app/assets/global.css"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>project-isidore:generate-index-js <span class="org-builtin">:input</span> <span class="org-string">"index.lisp"</span> <span class="org-builtin">:output</span> <span class="org-string">"/app/assets/index.js"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setf hunchentoot:*dispatch-table*
        <span class="org-comment-delimiter">;; </span><span class="org-comment">for an explanation of ` and , and '. see https://stackoverflow.com/questions/60378335/quote-comma-in-common-lisp</span>
        `<span class="org-rainbow-delimiters-depth-3">(</span>hunchentoot:dispatch-easy-handlers
          ,<span class="org-rainbow-delimiters-depth-4">(</span>hunchentoot:create-folder-dispatcher-and-handler <span class="org-comment">; Requires full system path</span>
                                                    <span class="org-string">"/"</span> <span class="org-string">"/app/assets/"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-comment">; /app is the root on a heroku filesystem</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> *acceptor*
    <span class="org-rainbow-delimiters-depth-3">(</span>hunchentoot:stop *acceptor*<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>setf *acceptor*
        <span class="org-rainbow-delimiters-depth-3">(</span>hunchentoot:start <span class="org-rainbow-delimiters-depth-4">(</span>make-instance 'hunchentoot:easy-acceptor <span class="org-builtin">:port</span> port<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org03956d2" class="outline-4">
<h4 id="org03956d2"><span class="section-number-4">6.1.3</span> Release Script</h4>
<div class="outline-text-4" id="text-6-1-3">
<div class="org-src-container">
<pre class="src src-sh" id="org7b2d933"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>

cat &lt;&lt; EOF
<span class="org-sh-heredoc">---</span>
<span class="org-sh-heredoc">addons:</span>
<span class="org-sh-heredoc">config_vars:</span>
<span class="org-sh-heredoc">  PATH: /usr/bin:/bin</span>
<span class="org-sh-heredoc">  CCL_DEFAULT_DIRECTORY: ccl</span>
<span class="org-sh-heredoc">default_process_types:</span>
<span class="org-sh-heredoc">  web: ./lispapp</span>
<span class="org-sh-heredoc">EOF</span>

</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org92ac5d0" class="outline-2">
<h2 id="org92ac5d0"><span class="section-number-2">7</span> Testing</h2>
<div class="outline-text-2" id="text-7">
<p>
There does exist a detailed evaluation of the many existing Common Lisp testing
frameworks, the most recent iteration by <a href="https://sabracrolleton.github.io/testing-framework">Sabracrolleton</a>. From this we select <code>parachute</code>
as our testing framework of choice.
</p>
<div class="org-src-container">
<pre class="src src-lisp" id="org1ee4940"><span class="org-comment-delimiter">#|</span>
<span class="org-comment">Copyright 2021 Hanshen Wang</span>

<span class="org-comment">Distributed under the LGPL license (see LICENSE file)</span>
<span class="org-comment">|#</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defpackage</span> <span class="org-comment-delimiter">#:</span><span class="org-doc">project-isidore/test</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:use</span> <span class="org-comment-delimiter">#:</span><span class="org-doc">cl</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:local-nicknames</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-comment-delimiter">#:</span><span class="org-doc">pi</span> <span class="org-comment-delimiter">#:</span><span class="org-doc">project-isidore</span><span class="org-rainbow-delimiters-depth-3">)</span>
                    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-comment-delimiter">#:</span><span class="org-doc">fa</span> <span class="org-comment-delimiter">#:</span><span class="org-doc">parachute</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:export</span> <span class="org-comment-delimiter">#:</span><span class="org-doc">test</span>
           <span class="org-comment-delimiter">#:</span><span class="org-doc">master-suite</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">in-package</span> <span class="org-comment-delimiter">#:</span><span class="org-doc">project-isidore/test</span><span class="org-rainbow-delimiters-depth-1">)</span>
&#12;
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">fa:define-test</span> master-suite <span class="org-builtin">:description</span> <span class="org-string">"The master suite of all project isidore tests"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">fa:define-test</span> dummy-test
  <span class="org-builtin">:description</span> <span class="org-string">"placeholder test until compilation can be tested"</span>
  <span class="org-builtin">:parent</span> master-suite
  <span class="org-rainbow-delimiters-depth-2">(</span>fa:of-type integer <span class="org-highlight-numbers-number">5</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

</pre>
</div>
</div>

<div id="outline-container-orgf9103fa" class="outline-3">
<h3 id="orgf9103fa"><span class="section-number-3">7.1</span> CI with Github Actions</h3>
<div class="outline-text-3" id="text-7-1">
<p>
The test suite defined above will be run on every push or pull request to the
Project Isidore Github repository according to this yaml file. If the tests all
pass, then Heroku will automatically <a href="#Builds-Deployment">deploy a build.</a>
</p>

<div class="org-src-container">
<pre class="src src-yaml" id="orgd1ba27d">name: CI

# Controls when the action will run. Triggers the workflow on push for any branch, and
# pull requests to master
on:
  push:
  pull_request:
    branches: [ master ]

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  test:
    name: ${{ matrix.lisp }} on ${{ matrix.os }}
    strategy:
      matrix:
        lisp: [sbcl-bin]
        os: [ubuntu-latest] #[ubuntu-latest, macos-latest, windows-latest]

    # run the job on every combination of "lisp" and "os" above
    runs-on: ${{ matrix.os }}

    steps:
    # Check out your repository under $GITHUB_WORKSPACE, so your job can access it
    - uses: actions/checkout@v2

    - name: Cache .roswell
      id: cache-dot-roswell
      uses: actions/cache@v1
      with:
        path: ~/.roswell
        key: ${{ runner.os }}-dot-roswell-${{ matrix.lisp }}-${{ hashFiles('**/*.asd') }}
        restore-keys: |
          ${{ runner.os }}-dot-roswell-${{ matrix.lisp }}-
          ${{ runner.os }}-dot-roswell-

    - name: Install roswell
      # always run install, since it does some global installs and setup that isn't cached
      env:
       LISP: ${{ matrix.lisp }}
      run: curl -L https://raw.githubusercontent.com/roswell/roswell/master/scripts/install-for-ci.sh | sh -x

    - name: Install parachute
      run: |
        ros install parachute
        echo "$HOME/.roswell/bin" &gt;&gt; $GITHUB_PATH

    - name: Run lisp
      continue-on-error: true
      shell: bash
      run: |
        ros -e '(format t "~a:~a on ~a~%...~%~%" (lisp-implementation-type) (lisp-implementation-version) (machine-type))'
        ros -e '(format t " fixnum bits:~a~%" (integer-length most-positive-fixnum))'
        ros -e "(ql:quickload 'trivial-features)" -e '(format t "features = ~s~%" *features*)'

    - name: Update Quicklisp distribution if cached
      shell: bash
      run: ros -e "(ql:update-all-dists :prompt nil)"

    - name: Load code and run tests
      shell: bash
      run: |
        run-parachute -l "project-isidore/test" "project-isidore/test"
</pre>
</div>
</div>
</div>
<div id="outline-container-org6d76874" class="outline-3">
<h3 id="org6d76874"><span class="section-number-3">7.2</span> Debugging</h3>
<div class="outline-text-3" id="text-7-2">
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">declaim</span> <span class="org-rainbow-delimiters-depth-2">(</span>optimize <span class="org-rainbow-delimiters-depth-3">(</span>debug <span class="org-highlight-numbers-number">3</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf34a153" class="outline-2">
<h2 id="Project-History-Credits"><span class="section-number-2">8</span> Project History &amp; Credits</h2>
<div class="outline-text-2" id="text-Project-History-Credits">
<p>
For previous project iterations/experience, see project-isidore-java repository
on GitHub using Java Spring, and project-isidore-javascript currently on GitHub
built with NextJS. <a href="0401bc27-686c-4276-a46d-6d95f05dce56">See also MEAN stack notes.</a>
</p>

<p>
Credit must be given where credit is due,
</p>
<ul class="org-ul">
<li><a href="https://gitlab.com/duncan-bayne/heroku-app-clozure-common-lisp">Duncan Bayne / heroku-app-clozure-common-lisp 路 GitLab</a>.
Used as a base template. Hence the LGPL License on my own work.</li>
<li><a href="https://github.com/gongzhitaao/orgcss">GitHub - gongzhitaao/orgcss: Simple and clean CSS for Org-exported HTML</a>
Customize to your hearts content.</li>
<li>Wonderful friends and family</li>
<li>(Spac)Emacs Community</li>
<li>Common Lisp Community</li>
<li>Github, Heroku, Cloudflare</li>
</ul>
</div>
</div>
<div id="bibliography">
<h2>References</h2>

<table>

<tr valign="top">
<td align="right" class="bibtexnumber">
[<a name="chaconProGit2014">1</a>]
</td>
<td class="bibtexitem">
Scott Chacon.
 <em>Pro Git</em>.
 The Expert's Voice in Software Development. Apress, New York, NY,
  second edition edition, 2014.

</td>
</tr>
</table>
</div>
</div>
<div id="postamble" class="status">
<script>
                              const headers = Array.from( document.querySelectorAll('h2, h3, h4, h5, h6') );

                              headers.forEach( header => {
                                header.insertAdjacentHTML('afterbegin',
                                 '<a href="#table-of-contents">&#8689;</a>'
                                );
                              });
                              </script>
                              <hr/>
                              <footer>
                                <div class="copyright-container">
                                  <div class="copyright">
                                    Comments? Corrections? <a href="https://hanshenwang.com/contact"> Please do reach out.</a><a href="https://hanshenwang.com/blog/rss.xml"> RSS Feed. </a><br/>
                                    Copyright &copy; 2021 Hanshen Wang. Some Rights Reserved.<br/>
                                    Content is available under
                                    <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
                                      CC-BY-SA 4.0
                                    </a> unless otherwise noted.
                                  </div>
                                  <div class="cc-badge">
                                    <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
                                      <img alt="Creative Commons License"
                                           src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" />
                                    </a>
                                  </div>
                                  <div class="rss-badge">
                                    <a rel="license" href="http://hanshenwang.com/blog/rss.xml">
                                      <img alt="Really Simple Syndication - RSS"
                                           src="https://upload.wikimedia.org/wikipedia/en/thumb/4/43/Feed-icon.svg/50px-Feed-icon.svg.png" />
                                    </a>
                                  </div>
                                </div>

                                <div class="generated">
                                  Created with <a href="https://www.gnu.org/software/emacs/">Emacs</a> 27.1 (<a href="https://orgmode.org">Org</a> mode 9.3) on <a href="https://www.gnu.org">GNU</a>/<a href="https://www.kernel.org/">Linux</a>
                                </div>
                              </footer>
</div>
</body>
</html>