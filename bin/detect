#!/usr/bin/env sh
# bin/detect <build-dir>

# detect bash script
#
# Copyright (c) 2021 Hanshen Wang.
#
# Author: Hanshen Wang <Hanshen@HanshenWang.com>
# URL: https://github.com/HanshenWang/project-isidore
#
# This file is part of Project Isidore.
#
# Project Isidore is free software: you can redistribute it and/or modify
# it under the terms of the GNU Lesser General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# Project Isidore is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public License
# along with Project Isidore.  If not, see <https://www.gnu.org/licenses/>.

# This pack is valid for ONLY for apps with an 'project-isidore.asd' in the
# root, replace with appropriate system-definition file.
if [ -f "$1/src/project-isidore.asd" ]; then
  echo "COMMON LISP"
  # exiting with 0 status is UNIX convention meaning everything ran alright
  exit 0
else
  echo "The buildpack was unable to detect a system declaration file with the
'project-isidore.asd' extension. Check if the '.slugignore' or '.gitignore' files are
interfering. Make sure an '.asd' file is at the root of the directory structure.

For more information, see:
https://devcenter.heroku.com/articles/buildpacks
https://lispcookbook.github.io/cl-cookbook/systems.html
https://common-lisp.net/project/asdf/
"
  # exiting with non-zero status is UNIX convention for the opposite
  exit 1
fi
